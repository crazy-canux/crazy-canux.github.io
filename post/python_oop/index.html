<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='é¢å‘å¯¹è±¡/OOP OOD: Object Oriented Design.
é¢å‘è¿‡ç¨‹çš„è®¾è®¡æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä½†æ˜¯å¦‚æœè¯­è¨€æœ¬èº«å†…ç½®é¢å‘è¿‡ç¨‹çš„ç»“æ„ï¼Œå°±ä¼šæ›´å®¹æ˜“ç¼–ç¨‹ï¼
OOP: Object Oriented Programming.
pythonå†…ç½®OOPçš„ç»“æ„ï¼Œä½†æ˜¯ä¸å¿…ä¸€å®šè¦ä½¿ç”¨ç±»å’ŒOOP.
é¢å‘å¯¹è±¡çš„ä¸¤ä¸ªä¸»é¢˜å°±æ˜¯ç±»å’Œç±»å®ä¾‹ï¼
åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹å«å®ä¾‹åŒ–ï¼
å±æ€§å°±æ˜¯å±äºå¦ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®æˆ–å‡½æ•°å…ƒç´ ï¼å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ï¼
ç±»/Class ç±»æ˜¯ç°å®ä¸–ç•Œçš„æŠ½è±¡çš„å®ä½“ä»¥ç¼–ç¨‹çš„å½¢å¼å‡ºç°ï¼Œå®ä¾‹æ˜¯è¿™äº›å¯¹è±¡çš„å…·ä½“åŒ–ï¼
ç±»æ˜¯ä¸€ç§æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œå®ä¾‹æ˜¯ç”³æ˜äº†ä¸€ä¸ªè¿™ç§ç±»å‹çš„å˜é‡ï¼
ç±»çš„å®šä¹‰ï¼š
Python 3 æ‰€æœ‰ç±»é»˜è®¤ç»§æ‰¿è‡ª objectï¼Œå³ä½¿ä¸å†™ (object) ä¹Ÿæ˜¯æ–°å¼ç±»ã€‚å»ºè®®ä¿ç•™ (object) ä»¥å…¼å®¹æ€§å’Œå¯è¯»æ€§ã€‚
class ClassName(object): &quot;&quot;&quot;Doc string.&quot;&quot;&quot; class_suite ç±»çš„åˆå§‹åŒ–æ–¹æ³•init(ç›¸å½“äºæ„é€ å™¨):
å¦‚æœå®šä¹‰äº†__init__æ–¹æ³•åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šé¦–å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚
initæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹selfï¼Œè€Œä¸”ä¸èƒ½æœ‰returnè¯­å¥ã€‚
initæ–¹æ³•ä¸€èˆ¬ç”¨æ¥è®¾ç½®å®ä¾‹å±æ€§(ä¹Ÿå°±æ˜¯æ•°æ®å±æ€§)ã€‚
class ClassName(object): def __init__(self, *args, **kwargs): pass ç‰¹æ®Šæ–¹æ³•new:
å¦‚æœå®šä¹‰äº†__new__æ–¹æ³•ï¼Œä¼šåœ¨initæ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯__init__çš„selfã€‚
newæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ç±»clsã€‚å¹¶ä¸”éœ€è¦è¿”å›ä¸€ä¸ªå®ä¾‹ã€‚
newæ–¹æ³•åœ¨objectä¸­è¢«å®šä¹‰ä¸ºstaticmethodã€‚
ç›¸å½“äºææ„å™¨çš„ç‰¹æ®Šæ–¹æ³•del:
__del__ç‰¹æ®Šæ–¹æ³•è¦åœ¨å®ä¾‹å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«æ¸…é™¤åæ‰ä¼šæ‰§è¡Œã€‚
ä¸è¦åœ¨delä¸­åšä¸å®ä¾‹æ²¡æœ‰å…³ç³»çš„äº‹æƒ…ï¼Œä¸€èˆ¬ä¸å»ºè®®å®ç°è¯¥æ–¹æ³•ã€‚
class ClassName(object): def __new__(cls, *args, **kwargs): ... return ... def __del__(self): ... ç±»å±æ€§ ç±»å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œæ–¹æ³•å±æ€§ã€‚
ç±»çš„æ•°æ®å±æ€§ä»…ä»…æ˜¯å®šä¹‰çš„ç±»çš„å˜é‡ã€‚
æ•°æ®å±æ€§é€šå¸¸æ˜¯é™æ€å˜é‡, ä¹Ÿå°±æ˜¯å’Œç±»å¯¹è±¡ç»‘å®š, ä¸ç±»çš„å®ä¾‹æ— å…³ã€‚
'>
<title>OOP</title>

<link rel='canonical' href='https://canuxcheng.com/post/python_oop/'>

<link rel="stylesheet" href="/scss/style.min.2d59822570c0be136f2ad87c952ef8788ac2a951067adda1c49b253bff7d0292.css"><meta property='og:title' content='OOP'>
<meta property='og:description' content='é¢å‘å¯¹è±¡/OOP OOD: Object Oriented Design.
é¢å‘è¿‡ç¨‹çš„è®¾è®¡æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä½†æ˜¯å¦‚æœè¯­è¨€æœ¬èº«å†…ç½®é¢å‘è¿‡ç¨‹çš„ç»“æ„ï¼Œå°±ä¼šæ›´å®¹æ˜“ç¼–ç¨‹ï¼
OOP: Object Oriented Programming.
pythonå†…ç½®OOPçš„ç»“æ„ï¼Œä½†æ˜¯ä¸å¿…ä¸€å®šè¦ä½¿ç”¨ç±»å’ŒOOP.
é¢å‘å¯¹è±¡çš„ä¸¤ä¸ªä¸»é¢˜å°±æ˜¯ç±»å’Œç±»å®ä¾‹ï¼
åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹å«å®ä¾‹åŒ–ï¼
å±æ€§å°±æ˜¯å±äºå¦ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®æˆ–å‡½æ•°å…ƒç´ ï¼å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ï¼
ç±»/Class ç±»æ˜¯ç°å®ä¸–ç•Œçš„æŠ½è±¡çš„å®ä½“ä»¥ç¼–ç¨‹çš„å½¢å¼å‡ºç°ï¼Œå®ä¾‹æ˜¯è¿™äº›å¯¹è±¡çš„å…·ä½“åŒ–ï¼
ç±»æ˜¯ä¸€ç§æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œå®ä¾‹æ˜¯ç”³æ˜äº†ä¸€ä¸ªè¿™ç§ç±»å‹çš„å˜é‡ï¼
ç±»çš„å®šä¹‰ï¼š
Python 3 æ‰€æœ‰ç±»é»˜è®¤ç»§æ‰¿è‡ª objectï¼Œå³ä½¿ä¸å†™ (object) ä¹Ÿæ˜¯æ–°å¼ç±»ã€‚å»ºè®®ä¿ç•™ (object) ä»¥å…¼å®¹æ€§å’Œå¯è¯»æ€§ã€‚
class ClassName(object): &quot;&quot;&quot;Doc string.&quot;&quot;&quot; class_suite ç±»çš„åˆå§‹åŒ–æ–¹æ³•init(ç›¸å½“äºæ„é€ å™¨):
å¦‚æœå®šä¹‰äº†__init__æ–¹æ³•åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šé¦–å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚
initæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹selfï¼Œè€Œä¸”ä¸èƒ½æœ‰returnè¯­å¥ã€‚
initæ–¹æ³•ä¸€èˆ¬ç”¨æ¥è®¾ç½®å®ä¾‹å±æ€§(ä¹Ÿå°±æ˜¯æ•°æ®å±æ€§)ã€‚
class ClassName(object): def __init__(self, *args, **kwargs): pass ç‰¹æ®Šæ–¹æ³•new:
å¦‚æœå®šä¹‰äº†__new__æ–¹æ³•ï¼Œä¼šåœ¨initæ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯__init__çš„selfã€‚
newæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ç±»clsã€‚å¹¶ä¸”éœ€è¦è¿”å›ä¸€ä¸ªå®ä¾‹ã€‚
newæ–¹æ³•åœ¨objectä¸­è¢«å®šä¹‰ä¸ºstaticmethodã€‚
ç›¸å½“äºææ„å™¨çš„ç‰¹æ®Šæ–¹æ³•del:
__del__ç‰¹æ®Šæ–¹æ³•è¦åœ¨å®ä¾‹å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«æ¸…é™¤åæ‰ä¼šæ‰§è¡Œã€‚
ä¸è¦åœ¨delä¸­åšä¸å®ä¾‹æ²¡æœ‰å…³ç³»çš„äº‹æƒ…ï¼Œä¸€èˆ¬ä¸å»ºè®®å®ç°è¯¥æ–¹æ³•ã€‚
class ClassName(object): def __new__(cls, *args, **kwargs): ... return ... def __del__(self): ... ç±»å±æ€§ ç±»å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œæ–¹æ³•å±æ€§ã€‚
ç±»çš„æ•°æ®å±æ€§ä»…ä»…æ˜¯å®šä¹‰çš„ç±»çš„å˜é‡ã€‚
æ•°æ®å±æ€§é€šå¸¸æ˜¯é™æ€å˜é‡, ä¹Ÿå°±æ˜¯å’Œç±»å¯¹è±¡ç»‘å®š, ä¸ç±»çš„å®ä¾‹æ— å…³ã€‚
'>
<meta property='og:url' content='https://canuxcheng.com/post/python_oop/'>
<meta property='og:site_name' content='Morgoth'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='oop' /><meta property='article:published_time' content='2016-06-21T21:18:09&#43;00:00'/><meta property='article:modified_time' content='2016-06-21T21:18:09&#43;00:00'/>
<meta name="twitter:title" content="OOP">
<meta name="twitter:description" content="é¢å‘å¯¹è±¡/OOP OOD: Object Oriented Design.
é¢å‘è¿‡ç¨‹çš„è®¾è®¡æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä½†æ˜¯å¦‚æœè¯­è¨€æœ¬èº«å†…ç½®é¢å‘è¿‡ç¨‹çš„ç»“æ„ï¼Œå°±ä¼šæ›´å®¹æ˜“ç¼–ç¨‹ï¼
OOP: Object Oriented Programming.
pythonå†…ç½®OOPçš„ç»“æ„ï¼Œä½†æ˜¯ä¸å¿…ä¸€å®šè¦ä½¿ç”¨ç±»å’ŒOOP.
é¢å‘å¯¹è±¡çš„ä¸¤ä¸ªä¸»é¢˜å°±æ˜¯ç±»å’Œç±»å®ä¾‹ï¼
åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹å«å®ä¾‹åŒ–ï¼
å±æ€§å°±æ˜¯å±äºå¦ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®æˆ–å‡½æ•°å…ƒç´ ï¼å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ï¼
ç±»/Class ç±»æ˜¯ç°å®ä¸–ç•Œçš„æŠ½è±¡çš„å®ä½“ä»¥ç¼–ç¨‹çš„å½¢å¼å‡ºç°ï¼Œå®ä¾‹æ˜¯è¿™äº›å¯¹è±¡çš„å…·ä½“åŒ–ï¼
ç±»æ˜¯ä¸€ç§æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œå®ä¾‹æ˜¯ç”³æ˜äº†ä¸€ä¸ªè¿™ç§ç±»å‹çš„å˜é‡ï¼
ç±»çš„å®šä¹‰ï¼š
Python 3 æ‰€æœ‰ç±»é»˜è®¤ç»§æ‰¿è‡ª objectï¼Œå³ä½¿ä¸å†™ (object) ä¹Ÿæ˜¯æ–°å¼ç±»ã€‚å»ºè®®ä¿ç•™ (object) ä»¥å…¼å®¹æ€§å’Œå¯è¯»æ€§ã€‚
class ClassName(object): &quot;&quot;&quot;Doc string.&quot;&quot;&quot; class_suite ç±»çš„åˆå§‹åŒ–æ–¹æ³•init(ç›¸å½“äºæ„é€ å™¨):
å¦‚æœå®šä¹‰äº†__init__æ–¹æ³•åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šé¦–å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚
initæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹selfï¼Œè€Œä¸”ä¸èƒ½æœ‰returnè¯­å¥ã€‚
initæ–¹æ³•ä¸€èˆ¬ç”¨æ¥è®¾ç½®å®ä¾‹å±æ€§(ä¹Ÿå°±æ˜¯æ•°æ®å±æ€§)ã€‚
class ClassName(object): def __init__(self, *args, **kwargs): pass ç‰¹æ®Šæ–¹æ³•new:
å¦‚æœå®šä¹‰äº†__new__æ–¹æ³•ï¼Œä¼šåœ¨initæ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯__init__çš„selfã€‚
newæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ç±»clsã€‚å¹¶ä¸”éœ€è¦è¿”å›ä¸€ä¸ªå®ä¾‹ã€‚
newæ–¹æ³•åœ¨objectä¸­è¢«å®šä¹‰ä¸ºstaticmethodã€‚
ç›¸å½“äºææ„å™¨çš„ç‰¹æ®Šæ–¹æ³•del:
__del__ç‰¹æ®Šæ–¹æ³•è¦åœ¨å®ä¾‹å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«æ¸…é™¤åæ‰ä¼šæ‰§è¡Œã€‚
ä¸è¦åœ¨delä¸­åšä¸å®ä¾‹æ²¡æœ‰å…³ç³»çš„äº‹æƒ…ï¼Œä¸€èˆ¬ä¸å»ºè®®å®ç°è¯¥æ–¹æ³•ã€‚
class ClassName(object): def __new__(cls, *args, **kwargs): ... return ... def __del__(self): ... ç±»å±æ€§ ç±»å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œæ–¹æ³•å±æ€§ã€‚
ç±»çš„æ•°æ®å±æ€§ä»…ä»…æ˜¯å®šä¹‰çš„ç±»çš„å˜é‡ã€‚
æ•°æ®å±æ€§é€šå¸¸æ˜¯é™æ€å˜é‡, ä¹Ÿå°±æ˜¯å’Œç±»å¯¹è±¡ç»‘å®š, ä¸ç±»çš„å®ä¾‹æ— å…³ã€‚
">
    <link rel="shortcut icon" href="favicon.ico" />
<style>
    :root {
        --article-font-family: "Merriweather", var(--base-font-family);
    }
</style>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap";
    
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
    
        document.head.appendChild(customFont);
    }());
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/home_hu_ee27fe234e3b32c2.jpg" width="300"
                            height="400" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Morgoth</a></h1>
            <h2 class="site-description">Hello World!</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='mailto:canuxcheng@163.com'
                        target="_blank"
                        title="E-mail"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-messages" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10" />
  <path d="M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/crazy-canux'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/categories/' target="_blank">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                
                <span>Categories</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tags/' target="_blank">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>Tags</span>
            </a>
        </li>
        
        
        <li >
            <a href='/rtfm/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                
                <span>RTFM</span>
            </a>
        </li>
        
        
        <li >
            <a href='/samuel/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>



                
                <span>Samuel</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://canuxcheng.com/" selected></option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#ç±»å±æ€§">ç±»å±æ€§</a></li>
  </ul>

  <ul>
    <li><a href="#å®ä¾‹å±æ€§">å®ä¾‹å±æ€§</a></li>
  </ul>

  <ul>
    <li><a href="#composition">Composition</a></li>
  </ul>

  <ul>
    <li><a href="#å­ç±»å’Œæ´¾ç”Ÿ">å­ç±»å’Œæ´¾ç”Ÿ</a></li>
    <li><a href="#ç»§æ‰¿">ç»§æ‰¿</a></li>
    <li><a href="#ä»å†…ç½®ç±»ç»§æ‰¿">ä»å†…ç½®ç±»ç»§æ‰¿</a></li>
    <li><a href="#multiple-inheritanceå¤šé‡ç»§æ‰¿">Multiple inheritanceå¤šé‡ç»§æ‰¿</a></li>
  </ul>

  <ul>
    <li><a href="#magicmethod">magicmethod</a></li>
    <li><a href="#delegation--wrapping">Delegation &amp; Wrapping</a></li>
  </ul>

  <ul>
    <li><a href="#abstractmethod">abstractmethod</a></li>
  </ul>

  <ul>
    <li><a href="#property">property</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/python/" >
                Python
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/python_oop/">OOP</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jun 21, 2016</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    6 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="é¢å‘å¯¹è±¡oop">é¢å‘å¯¹è±¡/OOP</h1>
<p>OOD: Object Oriented Design.</p>
<p>é¢å‘è¿‡ç¨‹çš„è®¾è®¡æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä½†æ˜¯å¦‚æœè¯­è¨€æœ¬èº«å†…ç½®é¢å‘è¿‡ç¨‹çš„ç»“æ„ï¼Œå°±ä¼šæ›´å®¹æ˜“ç¼–ç¨‹ï¼</p>
<p>OOP: Object Oriented Programming.</p>
<p>pythonå†…ç½®OOPçš„ç»“æ„ï¼Œä½†æ˜¯ä¸å¿…ä¸€å®šè¦ä½¿ç”¨ç±»å’ŒOOP.</p>
<p>é¢å‘å¯¹è±¡çš„ä¸¤ä¸ªä¸»é¢˜å°±æ˜¯ç±»å’Œç±»å®ä¾‹ï¼</p>
<p>åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹å«å®ä¾‹åŒ–ï¼</p>
<p>å±æ€§å°±æ˜¯å±äºå¦ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®æˆ–å‡½æ•°å…ƒç´ ï¼å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ï¼</p>
<hr>
<h1 id="ç±»class">ç±»/Class</h1>
<p>ç±»æ˜¯ç°å®ä¸–ç•Œçš„æŠ½è±¡çš„å®ä½“ä»¥ç¼–ç¨‹çš„å½¢å¼å‡ºç°ï¼Œå®ä¾‹æ˜¯è¿™äº›å¯¹è±¡çš„å…·ä½“åŒ–ï¼</p>
<p>ç±»æ˜¯ä¸€ç§æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œå®ä¾‹æ˜¯ç”³æ˜äº†ä¸€ä¸ªè¿™ç§ç±»å‹çš„å˜é‡ï¼</p>
<p>ç±»çš„å®šä¹‰ï¼š</p>
<p>Python 3 æ‰€æœ‰ç±»é»˜è®¤ç»§æ‰¿è‡ª objectï¼Œå³ä½¿ä¸å†™ (object) ä¹Ÿæ˜¯æ–°å¼ç±»ã€‚å»ºè®®ä¿ç•™ (object) ä»¥å…¼å®¹æ€§å’Œå¯è¯»æ€§ã€‚</p>
<pre><code>class ClassName(object):
    &quot;&quot;&quot;Doc string.&quot;&quot;&quot;
    class_suite
</code></pre>
<p>ç±»çš„åˆå§‹åŒ–æ–¹æ³•init(ç›¸å½“äºæ„é€ å™¨):</p>
<p>å¦‚æœå®šä¹‰äº†__init__æ–¹æ³•åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šé¦–å…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚</p>
<p>initæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯å®ä¾‹selfï¼Œè€Œä¸”ä¸èƒ½æœ‰returnè¯­å¥ã€‚</p>
<p>initæ–¹æ³•ä¸€èˆ¬ç”¨æ¥è®¾ç½®å®ä¾‹å±æ€§(ä¹Ÿå°±æ˜¯æ•°æ®å±æ€§)ã€‚</p>
<pre><code>class ClassName(object):
    def __init__(self, *args, **kwargs):
        pass
</code></pre>
<p>ç‰¹æ®Šæ–¹æ³•new:</p>
<p>å¦‚æœå®šä¹‰äº†__new__æ–¹æ³•ï¼Œä¼šåœ¨initæ–¹æ³•ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯__init__çš„selfã€‚</p>
<p>newæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ç±»clsã€‚å¹¶ä¸”éœ€è¦è¿”å›ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>newæ–¹æ³•åœ¨objectä¸­è¢«å®šä¹‰ä¸ºstaticmethodã€‚</p>
<p>ç›¸å½“äºææ„å™¨çš„ç‰¹æ®Šæ–¹æ³•del:</p>
<p>__del__ç‰¹æ®Šæ–¹æ³•è¦åœ¨å®ä¾‹å¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«æ¸…é™¤åæ‰ä¼šæ‰§è¡Œã€‚</p>
<p>ä¸è¦åœ¨delä¸­åšä¸å®ä¾‹æ²¡æœ‰å…³ç³»çš„äº‹æƒ…ï¼Œä¸€èˆ¬ä¸å»ºè®®å®ç°è¯¥æ–¹æ³•ã€‚</p>
<pre><code>class ClassName(object):

    def __new__(cls, *args, **kwargs):
        ...
        return ...

    def __del__(self):
        ...
</code></pre>
<h2 id="ç±»å±æ€§">ç±»å±æ€§</h2>
<p>ç±»å±æ€§åˆ†ä¸ºæ•°æ®å±æ€§å’Œæ–¹æ³•å±æ€§ã€‚</p>
<p>ç±»çš„æ•°æ®å±æ€§ä»…ä»…æ˜¯å®šä¹‰çš„ç±»çš„å˜é‡ã€‚</p>
<p>æ•°æ®å±æ€§é€šå¸¸æ˜¯é™æ€å˜é‡, ä¹Ÿå°±æ˜¯å’Œç±»å¯¹è±¡ç»‘å®š, ä¸ç±»çš„å®ä¾‹æ— å…³ã€‚</p>
<p>ç›´æ¥é€šè¿‡ç±»åæ¥è®¿é—®ç±»çš„æ•°æ®å±æ€§ã€‚ä¸å»ºè®®é€šè¿‡å®ä¾‹æ¥è®¿é—®ç±»çš„æ•°æ®å±æ€§ã€‚</p>
<pre><code>class ClassName(object):
    CONST_VARIABLE = 'value'

    def __init__(self, *args, **kwargs):
        ClassName.CONST_VARIABLE = 'new'

ClassName.CONST_VARIABLE = 'new value'
</code></pre>
<p>ç±»çš„æ–¹æ³•å±æ€§ä»…ä»…æ˜¯ä¸€ä¸ªä½œä¸ºç±»å®šä¹‰çš„ä¸€éƒ¨åˆ†å®šä¹‰çš„å‡½æ•°, ä¸ç±»çš„å®ä¾‹æ— å…³ã€‚</p>
<p>ç±»ä¸­å®šä¹‰çš„æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå®ä¾‹selfã€‚</p>
<p>æ–¹æ³•å±æ€§å¿…é¡»ç»‘å®šåˆ°ä¸€ä¸ªå®ä¾‹æ‰èƒ½è¢«ç›´æ¥è°ƒç”¨, éç»‘å®šæ–¹æ³•æ²¡æœ‰ç»™å‡ºå®ä¾‹å¯¹è±¡ä¸€èˆ¬ä¸èƒ½ç›´æ¥è°ƒç”¨ã€‚</p>
<pre><code>class ClassName(object):
    def func(self, *args, **kwargs):
        pass
</code></pre>
<p>Python 3 ä¸­ï¼Œç›´æ¥è°ƒç”¨ ClassName.func() ä¼šæŠ¥é”™ï¼šTypeError: func() missing 1 required positional argument: &lsquo;self</p>
<p>è°ƒç”¨éç»‘å®šæ–¹æ³•ï¼š</p>
<pre><code>ClassName.func(ClassName()) # é™¤éä¼ å…¥å®ä¾‹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°selfçš„å€¼
# å¸¸ç”¨åœºæ™¯ï¼š è°ƒç”¨çˆ¶ç±»ä¸­çš„éç»‘å®šæ–¹æ³•
class ClassName(BaseClass):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        ...
</code></pre>
<p>è°ƒç”¨ç»‘å®šæ–¹æ³•ï¼š è‡ªåŠ¨æŠŠå®ä¾‹ä½œä¸ºselfä¼ å…¥ï¼Œä¸ç”¨æ˜¾å¼ä¼ å…¥ã€‚</p>
<pre><code>ClassName().func()
</code></pre>
<p>æŸ¥çœ‹ç±»çš„å±æ€§ï¼š</p>
<pre><code>dir(class) # å†…å»ºå‡½æ•°
class.__dict__ # ç±»çš„ç‰¹æ®Šå±æ€§
</code></pre>
<p>ç±»çš„ç‰¹æ®Šå±æ€§ï¼š</p>
<pre><code>class.__name__ # class namkkk
class.__qualname__
class.__module__
class.__doc__ # æ–‡æ¡£çš„ç‰¹æ®Šå±æ€§, ä¸ä¼šè¢«ç»§æ‰¿.
class.__annotations

class.__bases__ # ç±»çš„çˆ¶ç±»æ„æˆçš„å…ƒç»„
class.__orig_bases__
# æ–°å¼ç±»æ–°å¢çš„ä¸‰ä¸ªç‰¹æ®Šå±æ€§:
class.__mro__ # è¿”å›æ–¹æ³•è§£æé¡ºåºçš„å…ƒç»„, mro()
class.__subclasses__() # è¿”å›å­ç±»çš„åˆ—è¡¨

class.__dict__ # ä»¥å­—å…¸çš„å½¢å¼å­˜å‚¨å¯¹è±¡çš„å±æ€§
class.__weakref__
</code></pre>
<p>æ–¹æ³•å’Œå‡½æ•°çš„ç‰¹æ®Šå±æ€§ï¼š</p>
<pre><code>'__doc__',
'__annotations__'
'__qualname__'
'__name__',
'__module__',
'__self__',
'__func__', 
</code></pre>
<h1 id="å®ä¾‹instances">å®ä¾‹/Instances</h1>
<p>å®ä¾‹åŒ–ï¼š</p>
<pre><code>ins = ClassName()
</code></pre>
<h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§</h2>
<p>å®ä¾‹å±æ€§ï¼š</p>
<p>å®ä¾‹ä¸¥æ ¼æ¥è¯´åªæœ‰æ•°æ®å±æ€§(æ–¹æ³•å±æ€§åº”è¯¥å±äºç±»å±æ€§)ï¼Œæ•°æ®å±æ€§å°±æ˜¯å’ŒæŸä¸ªå®ä¾‹ç›¸å…³è”çš„æ•°æ®å€¼ï¼Œè¿™äº›å€¼ç‹¬ç«‹äºå…¶å®ƒå®ä¾‹æˆ–ç±»ï¼Œå½“ä¸€ä¸ªå®ä¾‹è¢«é‡Šæ”¾ï¼Œç›¸åº”çš„æ•°æ®å±æ€§ä¹Ÿè¢«é‡Šæ”¾ã€‚é€šå¸¸é€šè¿‡initæ–¹æ³•æ¥è®¾ç½®å®ä¾‹çš„æ•°æ®å±æ€§ã€‚</p>
<pre><code>class ClassName(object):
    DATA = &quot;in class&quot; # ç±»çš„æ•°æ®å±æ€§

    def __init__(self, default=&quot;default&quot;, *args, **kwargs):
        self.default = default # å½“å‰å®ä¾‹çš„æ•°æ®å±æ€§
</code></pre>
<p>åŒºåˆ«ç±»çš„æ•°æ®å±æ€§å’Œå®ä¾‹çš„æ•°æ®å±æ€§ã€‚</p>
<pre><code>obj1 = ClassName()
print(obj1.DATA) # &quot;in class&quot;, å½“å®ä¾‹æ²¡æœ‰åŒåçš„æ•°æ®å±æ€§ï¼Œä¼šè®¿é—®ç±»çš„æ•°æ®å±æ€§ã€‚
obj1.DATA = &quot;in obj1&quot; # ç›¸å½“äºç»™å®ä¾‹æ–°å»ºäº†ä¸€ä¸ªæ•°æ®å±æ€§ï¼Œä¼šè¦†ç›–ç±»çš„æ•°æ®å±æ€§ã€‚
print(obj1.DATA) # &quot;in obj1&quot; è®¿é—®çš„æ˜¯å®ä¾‹çš„æ•°æ®å±æ€§ï¼Œè¦†ç›–äº†ç±»çš„æ•°æ®å±æ€§ã€‚
print(ClassName.DATA) # &quot;in class&quot; è®¿é—®ç±»çš„æ•°æ®å±æ€§ã€‚
</code></pre>
<p>æŸ¥çœ‹å®ä¾‹å±æ€§:</p>
<pre><code>instance.__dict__
</code></pre>
<p>å®ä¾‹çš„ç‰¹æ®Šå±æ€§ï¼š</p>
<pre><code>instance.__dict__ # ä»¥å­—å…¸çš„å½¢å¼å­˜å‚¨å¯¹è±¡çš„å±æ€§
instance.__class__ # å®ä¾‹å¯¹åº”çš„ç±»
</code></pre>
<hr>
<h1 id="å°è£…encapsulation"><strong>å°è£…/Encapsulation</strong></h1>
<p>å°è£…æè¿°äº†å¯¹æ•°æ®ï¼ä¿¡æ¯è¿›è¡Œéšè—çš„è§‚å¿µï¼Œå¯¹æ•°æ®å±æ€§æä¾›æ¥å£å’Œè®¿é—®å‡½æ•°ï¼</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®å±æ€§å’Œç±»å±æ€§éƒ½æ˜¯publicçš„ï¼ç±»æ‰€åœ¨çš„æ¨¡å—å’Œå¯¼å…¥äº†ç±»çš„å…¶å®ƒæ¨¡å—éƒ½å¯ä»¥ä½¿ç”¨ï¼</p>
<pre><code>var # public
def method_name(self):
</code></pre>
<p>ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§æ˜¯protected,èƒ½åœ¨ç±»æœ¬èº«å’Œå­ç±»ä½¿ç”¨ï¼Œç±»çš„å®ä¾‹å¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸å¯ä»¥ç”¨from module import *å¯¼å…¥ï¼</p>
<p>ç”¨äºæŠŠå±æ€§é™åˆ¶åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼</p>
<pre><code>_xxx # protected
def _xxx(self):
</code></pre>
<p>åŒä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§æ˜¯private, åªèƒ½ç±»æœ¬èº«ä½¿ç”¨ï¼Œç±»çš„å®ä¾‹ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œå­ç±»å’Œå…¶å®ƒç±»éƒ½ä¸èƒ½ä½¿ç”¨,å­ç±»ä¹Ÿä¸èƒ½è¦†ç›–ï¼</p>
<p>ç”¨äºæŠŠå±æ€§é™åˆ¶åœ¨ä¸€ä¸ªç±»ä¸­.</p>
<pre><code>__xxx # private
def __xxx(self):
</code></pre>
<p>ç³»ç»Ÿå·²ç»å®šä¹‰çš„ç‰¹æ®Šæ–¹æ³•ï¼Œä¹Ÿç§°é­”æ³•æ–¹æ³•ï¼</p>
<pre><code>def __xxx__(self): # ç³»ç»Ÿå®šä¹‰çš„åå­—
</code></pre>
<h2 id="composition">Composition</h2>
<p>ç±»ä¹‹é—´çš„å…³ç³»åªæœ‰ä¸¤ç§ç»§æ‰¿å’ŒåŒ…å«.</p>
<p>åˆ›å»ºå¤åˆå¯¹è±¡æ—¶å¯ä»¥é€šè¿‡compositionç»„åˆæ¥å¢åŠ åŠŸèƒ½å’Œä»£ç çš„é‡ç”¨æ€§ï¼</p>
<p>å½“ç±»ä¹‹é—´æœ‰æ˜¾è‘—ä¸åŒï¼Œå¹¶ä¸”è¾ƒå°çš„ç±»æ˜¯è¾ƒå¤§çš„ç±»æ‰€éœ€çš„ç»„ä»¶æ—¶ä¸€èˆ¬ä½¿ç”¨ç»„åˆï¼</p>
<pre><code>from .company import Company
from .home import Home
class Emp(object):
    def __init__(self, *args, **kwargs):
        self.comp = Company(args)
        self.home = Home(kwargs)
</code></pre>
<hr>
<h1 id="ç»§æ‰¿inheritance"><strong>ç»§æ‰¿/Inheritance</strong></h1>
<p>åˆ©ç”¨ç±»çš„ä¸¤ç§æ–¹å¼å°±æ˜¯åŒ…è£…å’Œç»§æ‰¿ï¼</p>
<h2 id="å­ç±»å’Œæ´¾ç”Ÿ">å­ç±»å’Œæ´¾ç”Ÿ</h2>
<p>å¯¹äºç›¸åŒçš„ç±»ä½†æ˜¯æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡derivationæ´¾ç”Ÿæ¥å®ç°ï¼</p>
<p>é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå·²ç»å®šä¹‰å¥½çš„ç±»ï¼Œæ‰©å±•å®ƒæˆ–è€…ä¿®æ”¹ï¼Œè€Œä¸ä¼šå½±å“ç³»ç»Ÿä¸­ä½¿ç”¨ç°å­˜ç±»çš„å…¶å®ƒä»£ç ç‰‡æ®µï¼</p>
<pre><code>class Father(object):
    def woman(self):
        ...

class Mother(object);
    def man(self):
        ...

class Child(Father, Mother):
    def child(self):
        ...
</code></pre>
<h2 id="ç»§æ‰¿">ç»§æ‰¿</h2>
<p>ç»§æ‰¿æè¿°äº†åŸºç±»çš„å±æ€§å¦‚ä½•é—ä¼ ç»™æ´¾ç”Ÿç±»ï¼</p>
<p>æ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰ç»§æ‰¿è‡ªåŸºç±»ï¼ˆçˆ¶ç±»ï¼‰</p>
<p>pythonä¸­çš„ç±»éœ€è¦ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¶ç±»ï¼</p>
<p>objectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼</p>
<p>å­ç±»ç»§æ‰¿äº†åŸºç±»çš„å±æ€§å’Œæ–¹æ³•ï¼</p>
<p>æ–‡æ¡£å­—ç¬¦ä¸²__doc__æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½ç»§æ‰¿ï¼</p>
<p>ä¸€ä¸ªç±»çš„__bases__å±æ€§å¯ä»¥æŸ¥çœ‹å®ƒçš„çˆ¶ç±»ç»„æˆçš„å…ƒç»„ï¼ä¸åŒ…æ‹¬çˆ¶ç±»çš„çˆ¶ç±»ï¼</p>
<pre><code>class.__bases__ # ç±»çš„çˆ¶ç±»æ„æˆçš„å…ƒç»„
</code></pre>
<p>å®ä¾‹è°ƒç”¨æ–¹æ³•æ—¶ï¼Œé»˜è®¤è°ƒç”¨çš„è¯¥å¯¹è±¡çš„ç±»çš„æœ¬èº«çš„æ–¹æ³•ï¼Œå¦‚æœè¯¥ç±»æ²¡æœ‰å®ç°è¯¥æ–¹æ³•æ‰ä¼šè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼</p>
<pre><code>class Parent(object):
    def foo(self):
        print(&quot;in parent.&quot;)

class Child(Parent):
    def foo(self):
        print(&quot;in child.&quot;)
</code></pre>
<h2 id="ä»å†…ç½®ç±»ç»§æ‰¿">ä»å†…ç½®ç±»ç»§æ‰¿</h2>
<p>å¯ä»¥ä»å†…ç½®ç±»å‹ç»§æ‰¿å­ç±»ï¼Œä¿®æ”¹ä¸€äº›å±æ€§ï¼</p>
<pre><code>class RoundFloat(float):
    def __new__(cls, val):
       return super(RoundFloat, cls).__new__(cls, round(val, 2))

class SortedKeyDict(dict):
    def keys(self):
        return sorted(super(SortedKeyDict, self).keys())
</code></pre>
<h2 id="multiple-inheritanceå¤šé‡ç»§æ‰¿">Multiple inheritanceå¤šé‡ç»§æ‰¿</h2>
<p>ç”±äºç±»ï¼Œç±»å‹ï¼Œå†…å»ºç±»å‹çš„å­ç±»éƒ½é‡æ–°æ¶æ„ï¼Œæ–°çš„ç±»é‡‡ç”¨MROç®—æ³•æ¥æŸ¥æ‰¾å­ç±»ä¸­ä½¿ç”¨çš„å±æ€§ï¼</p>
<p>MRO: Method Resolution Order, æ–¹æ³•è§£é‡Šé¡ºåºï¼é‡‡ç”¨å¹¿åº¦ä¼˜å…ˆï¼Œä»å·¦è‡³å³è¾¹ï¼Œæ¥è·å–åœ¨å­ç±»ä¸­çš„å±æ€§ï¼</p>
<p>å¯ä»¥é€šè¿‡æ–°å¼ç±»çš„ç‰¹æ®Šå±æ€§æŸ¥çœ‹å­ç±»çš„å±æ€§çš„æŸ¥æ‰¾é¡ºåºï¼š</p>
<pre><code>class.__mro__ # è¿”å›æ–¹æ³•è§£æé¡ºåºçš„å…ƒç»„
</code></pre>
<p>å¤šç»§æ‰¿ï¼Œmroå’Œsuperçš„ç”¨æ³•ï¼š</p>
<p>superæ¯æ¬¡åªè°ƒç”¨MROä¸­çš„ç¬¬ä¸€ä¸ªçˆ¶ç±»ï¼Œå’Œgetattrçš„é¡ºåºä¸€æ ·ï¼å¹¶ä¸”ç›¸åŒçš„çˆ¶ç±»åªè°ƒç”¨ä¸€æ¬¡ï¼</p>
<p>æ•°æ®å±æ€§ï¼Œæ™®é€šæ–¹æ³•å±æ€§ï¼Œç‰¹æ®Šæ–¹æ³•å±æ€§éƒ½æ˜¯æŒ‰ç…§MROé¡ºåºæ¥æŸ¥æ‰¾ï¼</p>
<p><a class="link" href="https://github.com/crazy-canux/python/tree/master/python/multiple_inheritance"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/tree/master/python/multiple_inheritance</a></p>
<hr>
<h1 id="å¤šæ€polymorphism"><strong>å¤šæ€/Polymorphism</strong></h1>
<p>pythonä¸æ”¯æŒæ–¹æ³•é‡è½½ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å¯¹å‚æ•°çš„åˆ¤æ–­ï¼Œå¯¹ä¸åŒçš„å‚æ•°è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚ä»¥æ­¤æ¥å®ç°é‡è½½çš„åŠŸèƒ½ã€‚</p>
<p>pythonå¯ä»¥é‡è½½é­”æ³•æ–¹æ³•ã€‚</p>
<h2 id="magicmethod">magicmethod</h2>
<p>pythonç±»æœ‰ä¸€äº›å¯è‡ªå®šä¹‰çš„ç‰¹æ®Šæ–¹æ³•é›†ï¼Œå®ƒä»¬ä¸­çš„ä¸€äº›æœ‰é¢„å®šä¹‰çš„é»˜è®¤è¡Œä¸ºï¼Œä¸€äº›æ²¡æœ‰ï¼Œç•™åˆ°éœ€è¦çš„æ—¶å€™å»å®ç°ã€‚</p>
<p>è¿™äº›ç‰¹æ®Šæ–¹æ³•æ˜¯pythonä¸­ç”¨æ¥æ‰©å……ç±»çš„æ–¹æ³•ã€‚å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿæ ‡å‡†ç±»å‹æˆ–è€…é‡è½½æ“ä½œç¬¦ã€‚</p>
<p>è¿™äº›ç‰¹æ®Šæ–¹æ³•éƒ½æ˜¯ç”¨åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„ï¼Œä¹Ÿè¢«ç§°ä¸ºé­”æ³•æ–¹æ³•ã€‚</p>
<p>å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼š</p>
<pre><code>__init__(self, *args, **kwargs) # æ„é€ å™¨ï¼Œå¸¦ä¸€äº›å¯é€‰çš„å‚æ•°
__new__(cls, *args, **kwargs) # æ„é€ å™¨ï¼Œå¸¦ä¸€äº›å¯é€‰çš„å‚æ•°ï¼Œé€šå¸¸ç”¨æ¥è®¾ç½®ä¸å¯å˜æ•°æ®ç±»å‹çš„å­ç±»ã€‚
__del__(self) # è§£æ„å™¨
</code></pre>
<p>å­—ç¬¦ä¸²è¡¨ç¤ºï¼š</p>
<pre><code>__str__(self) # str(), print() 
obj = ClassName()
print(obj) # æ²¡æœ‰å®šä¹‰__str__ ä¼šè°ƒç”¨__repr__

__repr__(self)  # repr()
obj = ClassName()
obj # é»˜è®¤çš„æ‰“å°å¯¹è±¡çš„è¿è¡Œæ—¶çš„å­—ç¬¦ä¸²ï¼Œ&lt;test.RoundFloat at 0x7fb715253e90&gt;
# å¯ä»¥é€šè¿‡é‡å†™__repr__()æ”¹å˜æ‰“å°çš„å†…å®¹

__bool__(self) # ç”¨äºboolåˆ¤æ–­çœŸå‡
</code></pre>
<p>å¯è°ƒç”¨å¯¹è±¡çš„ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__call__(self, *args) # è¡¨ç¤ºå¯è°ƒç”¨çš„å®ä¾‹, callable(object) ä¼šè¿”å›true.

class TestClass(object):
    def __call__(self, *args):
        print(&quot;Instance is callable after implement call method in class.&quot;)
        print(&quot;Args come from instance invoke is: {}&quot;.format(args))

tc = TestClass()
callable(tc) # True
tc()
tc('arg1')
</code></pre>
<p>å®ä¾‹å’Œç±»çš„æ£€æŸ¥ç›¸å…³ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__instancecheck__(self, instance) # isinstance(instance, class)
__subclasscheck__(self, subclass) # issubclass(subclass, class)
</code></pre>
<p>å±æ€§ç›¸å…³ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__getattr__(self, name) # getattr(), ä»…å½“å±æ€§æ²¡æœ‰åœ¨å®ä¾‹ï¼ç±»ï¼çˆ¶ç±»çš„__dict__ä¸­æ‰¾åˆ°æ‰ä¼šè°ƒç”¨ï¼
__getattribute__(self, name)
__setattr__(self, name, value)
__delattr__(self, name)
__dir__(self) # dir()

# æè¿°ç¬¦ç›¸å…³
__get__(self, instance, owner)
__set__(self, instance, value)
__delete__(self, instance)
</code></pre>
<p>withä¸Šä¸‹æ–‡ç®¡ç†ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__enter__(self) # return self, éœ€è¦è¿”å›self
__exit__(self, exc_type, exc_value, traceback)
</code></pre>
<p>å¯¹è±¡æ¯”è¾ƒç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__cmp__(self, other) # cmp()
__lt__(self, other)
__le__(self, other)
__eq__(self, other)
__ne__(self, other)
__gt__(self, other)
__ge__(self, other)
</code></pre>
<p>å®¹å™¨ç±»å‹ç›¸å…³ç‰¹æ®Šæ–¹æ³•:</p>
<pre><code>__len__(self) #ã€€len()
__getitem__(self, key) #
__setitem__(self, key, value) #
__delitem__(self, key) # del
__reversed__(self) # reversed()
__iter__(self) # iter()
__contains__(self, item)
__missing__(self, key)
</code></pre>
<p><a class="link" href="https://github.com/crazy-canux/python/blob/master/python/magicmethod/container.py"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/blob/master/python/magicmethod/container.py</a></p>
<p>æ•°å€¼ç±»å‹ç›¸å…³ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<pre><code>__add__(self, other)
__sub__(self, other)
__mul__(self, other)
__div__(self, other)
__truediv__(self, other)
__floordiv__(self, other)
__mod__(self, other)
__divmod__(self, other)
__pow__(self, other[, module])
__lshift__(self, other)
__rshift__(self, other)
__and__(self, other)
__xor__(self, other)
__or__(self, other)

__rxxx__(self, other)

# åŸä½è¿ç®—å¿…é¡»è¿”å›self.
__ixxx__(self, other) # self += other -&gt; self = self + other

__neg__(self)
__pos__(self)
__abs__(self)
__invert__(self)

__complex__(self)
__int__(self)
__long__(self)
__float__(self)

__oct__(self)
__hex__(self)

__index__(self)
__coerce__(self, other)
</code></pre>
<h2 id="delegation--wrapping">Delegation &amp; Wrapping</h2>
<p>WrappingåŒ…è£…å°±æ˜¯å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡å¢åŠ ï¼Œåˆ é™¤æˆ–ä¿®æ”¹å·²ç»å­˜åœ¨çš„åŠŸèƒ½ï¼</p>
<p>Delegationæˆæƒ(ä»£ç†)æ˜¯WrappingåŒ…è£…çš„ä¸€ä¸ªç‰¹æ€§,ç”¨äºç®€åŒ–å¤„ç†ç›¸å…³å‘½ä»¤æ€§åŠŸèƒ½ï¼Œæœ€å¤§åŒ–é‡ç”¨ä»£ç ï¼</p>
<p>å®ç°delegationçš„å…³é”®åœ¨äºè¦†ç›–__getattr__()ç‰¹æ®Šæ–¹æ³•ï¼é€šè¿‡è°ƒç”¨å†…ç½®å‡½æ•°getattr()å¾—åˆ°ä¸€ä¸ªå¯¹è±¡çš„é»˜è®¤è¡Œä¸ºï¼</p>
<pre><code>class Wrapper(object):
    def __init__(self, obj):
        self.__data = obj

    def __getattr__(self, attr):
        return getattr(self.__data, attr)
</code></pre>
<hr>
<h1 id="metaclasså…ƒç±»">metaclasså…ƒç±»</h1>
<p>metaclass æ˜¯&quot;åˆ›å»ºç±»çš„ç±»&quot;ã€‚æ­£å¦‚å®ä¾‹æ˜¯ç±»çš„å®ä¾‹åŒ–ï¼Œç±»ä¹Ÿæ˜¯å…ƒç±»çš„å®ä¾‹åŒ–ã€‚åœ¨ Python ä¸­ï¼Œç±»æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œè€Œå…ƒç±»å°±æ˜¯ç”¨æ¥åˆ›å»ºè¿™äº›ç±»å¯¹è±¡çš„ã€‚</p>
<p>å…ƒç±»ç”¨æ¥å®šä¹‰æŸäº›ç±»æ˜¯å¦‚ä½•è¢«åˆ›å»ºçš„ã€‚æ”¹å˜ç±»çš„é»˜è®¤è¡Œä¸ºå’Œåˆ›å»ºæ–¹å¼ã€‚</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦åˆ›å»ºå…ƒç±»ï¼Œä¸€èˆ¬ä½¿ç”¨ç³»ç»Ÿçš„å…ƒç±»çš„é»˜è®¤æ–¹å¼ã€‚</p>
<p>åœ¨æ‰§è¡Œç±»å®šä¹‰çš„æ—¶å€™ï¼Œè§£é‡Šå™¨å¿…é¡»çŸ¥é“è¿™ä¸ªç±»çš„å…ƒç±»ï¼›</p>
<pre><code>class ClassName(metaclass=MetaClassName):
    pass
</code></pre>
<p>åœ¨æ‰§è¡Œç±»å®šä¹‰æ—¶å€™æ£€æŸ¥å…ƒç±»ï¼Œå…ƒç±»ä¼ é€’ä¸‰ä¸ªå‚æ•°åˆ°æ„é€ å™¨ï¼š</p>
<pre><code>ç±»å
ä»åŸºç±»ç»§æ‰¿æ•°æ®çš„å…ƒç»„, __bases__
ç±»çš„å±æ€§å­—å…¸, __dict__
</code></pre>
<p>å…ƒç±»ç›¸å…³çš„å¯å®šåˆ¶å±æ€§ï¼š</p>
<pre><code>__metaclass__
</code></pre>
<p>å®šä¹‰ä¸€ä¸ªå…ƒç±»ï¼š</p>
<pre><code>class MetaClassName(type):
    def __new__(cls, name, bases, dicts):
        super().__new__(cls, name, bases, dicts)
        # åœ¨è¿™é‡Œåšä¸€äº›ä½ å¸Œæœ›ä½¿ç”¨è¯¥å…ƒç±»çš„ç±»åœ¨å®šä¹‰æ—¶åšçš„æ“ä½œ
    def __call__(cls, *args, **kwargs):
       if cls not in cls._instances:
          cls._instances[cls] = super().__call__(*args, **kwargs)
      return cls._instances[cls]

class ClassName(metaclass=MetaClassName):
    def __init__(self, value):
        self.value = value
    ...
</code></pre>
<p><a class="link" href="https://github.com/crazy-canux/python/tree/master/python/metaclass"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/tree/master/python/metaclass</a></p>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å•ä¾‹æ¨¡å¼</li>
<li>è‡ªåŠ¨æ³¨å†Œç±»</li>
<li>å±æ€§éªŒè¯å’Œè½¬</li>
<li>ORMæ¨¡å‹åˆ›å»º</li>
<li>æŠ½è±¡åŸºç±»å’Œæ¥å£æ£€æŸ¥</li>
</ul>
<h2 id="abstractmethod">abstractmethod</h2>
<p>æŠ½è±¡æ–¹æ³•ï¼Œç±»ä¼¼äºjavaçš„interface.</p>
<p>æœ€ç®€å•çš„æŠ½è±¡æ–¹æ³•ï¼š</p>
<pre><code># å¦‚æœå­ç±»æ²¡æœ‰å®ç°åŒåçš„è¯¥æ–¹æ³•ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼
def base_method(self):
    raise NotImplementedError
</code></pre>
<p>æˆ–è€…ä½¿ç”¨abcæ ‡å‡†åº“æ¥å®ç°ï¼š</p>
<p><a class="link" href="https://github.com/crazy-canux/python/tree/master/python/psl/myabc.py"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/tree/master/python/psl/myabc.py</a></p>
<hr>
<h1 id="descriptorsæè¿°ç¬¦">descriptorsæè¿°ç¬¦</h1>
<p>æ™®é€šå¯¹è±¡è®¿é—®(set/get/delete)å±æ€§çš„ä¼˜å…ˆçº§ï¼š</p>
<pre><code>obj.__dict__['attr'] # å…ˆè®¿é—®å®ä¾‹å¯¹è±¡
obj.__class__.__dict__['attr'] # å†è®¿é—®ç±»å¯¹è±¡
obj.__class__.__base__.__dict__['attr'] # æ¥ç€è®¿é—®åŸºç±»çš„å¯¹è±¡,ä¸åŒ…æ‹¬metaclass.
__getattr__ # å¦‚æœå®ç°äº†çš„è¯ï¼Œä¼˜å…ˆçº§æœ€ä½
</code></pre>
<p>æè¿°ç¬¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†å½“å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§è¢«è®¿é—®æ—¶åº”è¯¥å¦‚ä½•å¤„ç†ã€‚ä»»ä½•å®šä¹‰äº† <strong>get</strong>()ã€<strong>set</strong>() æˆ– <strong>delete</strong>() æ–¹æ³•çš„ç±»éƒ½æ˜¯æè¿°ç¬¦ã€‚</p>
<pre><code>__get__(self, obj, type=None) # è¿”å›ä¸€ä¸ªå±æ€§çš„å€¼
__set__(self, obj, value) # è®¾ç½®ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè¿”å›None
__delete__(self, obj) # å±æ€§çš„å¼•ç”¨é€’å‡ï¼Œè¿”å›None
</code></pre>
<p>æè¿°ç¬¦æ˜¯æ•°æ®propertyï¼Œclassï¼Œstaticmethodï¼Œclassmethod, ä»¥åŠsuperçš„æœºåˆ¶ï¼</p>
<p>data descriptor:å®šä¹‰äº†__get__å’Œ__set__çš„å¯¹è±¡æ˜¯æ•°æ®æè¿°ç¬¦, ä¸»è¦ç”¨äºæ•°æ®å±æ€§ï¼</p>
<p>non data descriptor:ä»…ä»…å®šä¹‰äº†__get__çš„å¯¹è±¡æ˜¯éæ•°æ®æè¿°ç¬¦ï¼Œä¸»è¦ç”¨äºæ–¹æ³•å±æ€§ï¼</p>
<p>å¦‚æœå®ä¾‹çš„å­—å…¸(obj.<strong>dict</strong>)å…·æœ‰ä¸æ•°æ®æè¿°ç¬¦ç›¸åŒåç§°çš„æ¡ç›®ï¼Œåˆ™æ•°æ®æè¿°ç¬¦ä¼˜å…ˆã€‚</p>
<p>å¦‚æœå®ä¾‹çš„å­—å…¸(obj.<strong>dict</strong>)å…·æœ‰ä¸éæ•°æ®æè¿°ç¬¦ç›¸åŒåç§°çš„æ¡ç›®ï¼Œåˆ™å­—å…¸æ¡ç›®ä¼˜å…ˆã€‚</p>
<pre><code>class DescriptorName(object):
    def __init__(self, name):
        self.name = name

    def __get__(self, instance, typ):
        print('__get__', instance, typ)
        return self.name

    def __set__(self, instance, value):
        print('__set__', instance, value)
        self.name = value

class TestClass(object):
    name = DescriptorName('canux')

tc = TestClass()
print(tc.name) # __get__(tc, type(tc))è¢«è°ƒç”¨
print(TestClass.name) # __get__(None, TestClass)è¢«è°ƒç”¨
tc.__dict__['name'] = 'test' # æ— æ•ˆ
tc.name = 'test' # __set__è¢«è°ƒç”¨
TestClass.name = 'test' # ä»…ä»…æ˜¯é‡æ–°å®šä¹‰ç±»çš„å±æ€§ï¼Œè¦†ç›–äº†æè¿°ç¬¦
# æ­¤æ—¶tc.__dict__æœ‰åŒåå±æ€§ï¼Œå¦‚æœå®šä¹‰äº†__set__
print(tc.name) # __get__è¢«è°ƒç”¨ï¼Œå±æ€§å·²ç»ä¿®æ”¹
print(TestClass.name) # __get__è¢«è°ƒç”¨,å±æ€§å·²ç»ä¿®æ”¹
# å¦‚æœæ²¡æœ‰å®šä¹‰__set__ï¼Œå°±æ˜¯è°ƒç”¨çš„tc.__dict__é‡Œé¢çš„ï¼
</code></pre>
<p>æè¿°ç¬¦è®¿é—®å±æ€§çš„ä¼˜å…ˆçº§ï¼š</p>
<pre><code>æ•°æ®æè¿°ç¬¦(__set__, __get__)
# å¯¹äºè®¿é—®å®ä¾‹å±æ€§obj.__getattribute__è°ƒç”¨æ–¹å¼ï¼štype(obj).__dict__['attr'].__get__(obj, type(obj))
# å¯¹äºè®¿é—®ç±»å±æ€§class.__getattribute__è°ƒç”¨æ–¹å¼ï¼šClassName.__dict__['attr'].__get__(None, ClassName)
instance.__dict__
éæ•°æ®æè¿°ç¬¦(__get__)
__getattr__ # å¦‚æœå®ç°äº†çš„è¯ï¼Œåœ¨æè¿°ç¬¦ä¸­ä¼˜å…ˆçº§æœ€ä½
</code></pre>
<p>æè¿°ç¬¦æ˜¯ç”±__getattribute__ç‰¹æ®Šæ–¹æ³•è°ƒç”¨ï¼Œè¦†ç›–è¯¥æ–¹æ³•å¯ä»¥é˜²æ­¢æè¿°ç¬¦è‡ªåŠ¨è°ƒç”¨.</p>
<p>obj.__getattribute__å’Œclass.__getattribute__çš„è°ƒç”¨æ–¹å¼ä¸åŒï¼</p>
<p>æè¿°ç¬¦çš„ä¸‰ä¸ªç‰¹æ®Šæ–¹æ³•ä¸€èˆ¬æ˜¯é€šè¿‡å±æ€§è®¿é—®è‡ªåŠ¨è°ƒç”¨ï¼</p>
<p>å‡½æ•°å’Œæ–¹æ³•çš„æè¿°ç¬¦ï¼š</p>
<p>åœ¨å±æ€§è®¿é—®æœŸé—´å‡½æ•°åŒ…æ‹¬äº†__get__æ–¹æ³•ç”¨äºç»‘å®šæ–¹æ³•ï¼å› æ­¤å‡½æ•°å’Œæ–¹æ³•æ˜¯éæ•°æ®æè¿°ç¬¦ï¼</p>
<pre><code>class TClass(object):
    def __get__(self, obj, typ=None):
        return types.MethodType(self, obj, typ)

    def tmethod(self, args):
        return args

class Foo(object):
    @Tclass
    def bar(self):
        print('in bar')

obj = TClass()
TClass.__dict__['tmethod'] # __tion __main__.f
TClass.tmethod # unbound method TClass.tmethod
obj.tmethod # bound method TClass.tmethod of &lt;__main__.TClass object at 0x7f8a4f084c10&gt;

obj.function(*args) -&gt; function(obj, *args)
Class.function(*args) -&gt; function(*args)
</code></pre>
<h2 id="property">property</h2>
<p>propertyå±æ€§æ˜¯ä¸€ç§æœ‰ç”¨çš„ç‰¹æ®Šç±»å‹çš„æè¿°ç¬¦ï¼ ä¹Ÿæ˜¯descriptorçš„ä¸»è¦ç”¨é€”ï¼</p>
<pre><code>property(fget=None, fset=None, fdel=None, doc=None) # è¿”å›ä¸€ä¸ªpropertyç±»å‹çš„å¯¹è±¡
</code></pre>
<p>é€šè¿‡ä¸Šé¢çš„descriptorçš„æ™®é€šæ–¹å¼å®ç°çº¯pythoå†™çš„property:</p>
<pre><code>class Property(object):
    def __init__(self, fget, fset, fdelete):
        self.fget = fget
        self.fset = fset
        self.fdelete = fdelete

    def __get__(self, obj, typ=None):
        return self.fget(obj)

    def __set__(self, obj, val):
        self.fset(obj, val)

    def __delete__(self, obj):
        self.fdelete(obj)

class Foo(object):
    def fget(self):
        print 'fget called'

    def fset(self, val):
        print 'fset called'

    def fdelete(self):
        print 'fdelete called'

    bar = Property(fget, fset, fdelete)
</code></pre>
<p>é€šè¿‡è£…é¥°å™¨@propertyæ¥å®ç°ï¼š</p>
<pre><code>class Person(object):
    def __init__(self):
        self._email = None

    @property
    def email(self):
        return self._email

    @email.setter
    def email(self, value):
        m = re.match('\W+@\W+\.\W+', value)
        if not m:
            raise Exception('email not valid')
        self._email = value

    @email.deleter
    def email(self):
        del self._email
</code></pre>
<p><a class="link" href="https://github.com/crazy-canux/python/tree/master/python/descriptor"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/tree/master/python/descriptor</a></p>
<hr>
<h1 id="super">super</h1>
<p>å› ä¸ºåŒåçš„æ–¹æ³•å­ç±»ä¼šè¦†ç›–çˆ¶ç±»ï¼Œåœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„åŒåæ–¹æ³•å¯ä»¥é€šè¿‡superå†…ç½®å‡½æ•°ã€‚</p>
<p>super()æ–¹æ³•å®é™…æ˜¯ä¸€ä¸ªæ„é€ å™¨ã€‚è‡ªåŠ¨æ‰¾åˆ°åŸºç±»æ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥selfå‚æ•°ã€‚</p>
<pre><code>super().__init__() # ä¸éœ€è¦ä¼ é€’å‚æ•°
</code></pre>
<p>å¯¹äºå•ç»§æ‰¿, superç”¨æ¥è°ƒç”¨çˆ¶ç±»åŒåæ–¹æ³•ã€‚</p>
<pre><code>class Child(Parent):
    def foo(self):
        Parent.foo(self) # å¯ä»¥æ‰‹åŠ¨è°ƒç”¨çˆ¶ç±»åŒåçš„æ–¹æ³•ï¼Œè°ƒç”¨éç»‘å®šæ–¹æ³•ï¼Œä¼ å…¥selfå‚æ•°ã€‚

class Child(Parent):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs) 
        ...

    def foo(self, *args, **kwargs):
        super().foo(*args, **kwargs) 
        ...
</code></pre>
<p>å¯¹äºå¤šç»§æ‰¿ï¼Œsuperç”¨æ³•å‚è€ƒä¸Šé¢çš„å¤šç»§æ‰¿ï¼</p>
<p>å¸¸ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</li>
<li>æ‰©å±•çˆ¶ç±»æ–¹æ³•</li>
<li>å¤šé‡ç»§æ‰¿åœºæ™¯</li>
<li>å±æ€§è®¾ç½®åœºæ™¯</li>
<li>åˆä½œå¼ç»§æ‰¿</li>
<li>ç±»æ–¹æ³•ä¸­ä½¿ç”¨</li>
<li>é™æ€æ–¹æ³•ä¸­ä½¿ç”¨</li>
</ul>
<p>super()è¿”å›çš„å¯¹è±¡æœ‰ä¸€ä¸ªç”¨äºè°ƒç”¨Descriptorçš„å®šåˆ¶__getattribute__()æ–¹æ³•ï¼</p>
<pre><code>super(B, obj).method() -&gt;
obj.__class__.__mro__ -&gt;
A.__dict__['method'].__get__(obj, B)
</code></pre>
<p><a class="link" href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/"  target="_blank" rel="noopener"
    >https://rhettinger.wordpress.com/2011/05/26/super-considered-super/</a></p>
<p>å‚è€ƒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼</p>
<h1 id="classmethod">classmethod</h1>
<p>classmethod æ˜¯ä¸€ä¸ªå†…ç½®è£…é¥°å™¨ï¼Œç”¨äºå°†æ–¹æ³•è½¬æ¢ä¸ºç±»æ–¹æ³•ã€‚ç±»æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æœ¬èº« clsï¼Œè€Œä¸æ˜¯å®ä¾‹ self</li>
<li>å¯ä»¥é€šè¿‡ç±»æˆ–å®ä¾‹è°ƒç”¨</li>
<li>å¯ä»¥è®¿é—®ç±»å±æ€§ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å±æ€§</li>
<li>å¸¸ç”¨äºåˆ›å»ºå¤‡é€‰æ„é€ å‡½æ•°</li>
</ul>
<p>ç±»æ–¹æ³•é€šå¸¸ç”¨äºæ›¿ä»£ç±»æ„é€ å‡½æ•°ï¼</p>
<pre><code>class ClassName(object):
    @classmethod
    def demo_cm(cls, *args, **kwargs):
        ...

# å¯ä»¥é€šè¿‡ç±»æ¥è°ƒç”¨, ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨éç»‘å®šæ–¹æ³•ï¼è‡ªåŠ¨ä¼ å…¥ç±»ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼
ClassName.demo_cm(args, kwargs)
# ä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹æ¥è°ƒç”¨, è‡ªåŠ¨ä¼ å…¥ç±»ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°
ClassName().demo_cm(args, kwargs) // not recommend
</code></pre>
<p>æè¿°ç¬¦ç›¸å…³ï¼š</p>
<pre><code>obj.function(*args) -&gt; function(type(obj), *args)
Class.function(*args) -&gt; function(Class, *args)
</code></pre>
<p>å¸¸ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¤‡é€‰æ„é€ å‡½æ•°</li>
<li>å·¥å‚æ–¹æ³•æ¨¡å¼</li>
<li>è®¿é—®å’Œä¿®æ”¹ç±»å±æ€§</li>
<li>é…ç½®å’Œè®¾ç½®ç›¸å…³æ–¹æ³•</li>
<li>ç»§æ‰¿ä¸­çš„ç±»æ–¹æ³•</li>
</ul>
<h1 id="staticmethod">staticmethod</h1>
<p>staticmethod æ˜¯ä¸€ä¸ªå†…ç½®è£…é¥°å™¨ï¼Œç”¨äºå°†æ–¹æ³•è½¬æ¢ä¸ºé™æ€æ–¹æ³•ã€‚é™æ€æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸æ¥æ”¶éšå¼çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆä¸éœ€è¦ self æˆ– clsï¼‰</li>
<li>å¯ä»¥é€šè¿‡ç±»æˆ–å®ä¾‹è°ƒâ€¦â€¦</li>
<li>ä¸èƒ½è®¿é—®ç±»æˆ–å®ä¾‹çš„å±æ€§</li>
<li>è¡Œä¸ºç±»ä¼¼æ™®é€šå‡½æ•°ï¼Œåªæ˜¯åœ¨ç±»çš„å‘½åç©ºé—´ä¸­</li>
</ul>
<p>ä¾‹å­:</p>
<pre><code>class ClassName(object):
    @staticmethod
    def demo_sm():
        ...

ClassName.demo_sm()
ClassName().demo_sm()
</code></pre>
<p>æè¿°ç¬¦ç›¸å…³ï¼š</p>
<pre><code>obj.function(*args) -&gt; function(*args)
Class.function(*args) -&gt; function(*args)
</code></pre>
<p>å¸¸ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å·¥å…·å‡½æ•°</li>
<li>éªŒè¯å’Œè½¬æ¢å‡½æ•°</li>
<li>å¸¸é‡å’Œé…ç½®ç›¸å…³</li>
<li>å·¥å‚æ–¹æ³•è¾…åŠ©å‡½æ•°</li>
</ul>
<hr>
<h1 id="class-decorators">Class Decorators</h1>
<p>ç±»è£…é¥°å™¨æ¯”å‡½æ•°è£…é¥°å™¨æ›´çµæ´»ï¼Œé«˜å†…èšï¼Œå°è£…æ€§ç­‰ä¼˜ç‚¹ï¼</p>
<p>ç±»è£…é¥°å™¨ç”¨äºè£…é¥°ä¸€ä¸ªç±».</p>
<pre><code>def deco_name(cls):
    class WrapperName(cls, ...):
        def __init__(self, *args, **kwargs):
            cls.__init__()
            ....__init__()
            ...
    return WrapperName

@deco_name
class ClassName(object):
    def __init__(self, *args, **kwargs):
        ...
    ...
</code></pre>
<p><a class="link" href="https://github.com/crazy-canux/python/blob/master/python/decorator/class_decorator.py"  target="_blank" rel="noopener"
    >https://github.com/crazy-canux/python/blob/master/python/decorator/class_decorator.py</a></p>
<hr>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/oop/">Oop</a>
        
    </section>


    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <div id="gitalk-container"></div>
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"
/>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: "3d41a2a237fabe050cc0",
        clientSecret: "868aa81b294f1463ddb6edc007576ecfed7d2075",
        repo: "crazy-canux.github.io",
        owner: "crazy-canux",
        admin: ["crazy-canux"],
        distractionFreeMode: false, 
        id: md5(location.pathname), 
    });
    (function () {
        if (
            ["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1
        ) {
            document.getElementById("gitalk-container").innerHTML =
                "Gitalk comments not available by default when the website is previewed locally.";
            return;
        }
        gitalk.render("gitalk-container");
    })();
</script>



    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2013 - 
        
        2025 Morgoth
    </section>
    
    <section class="powerby">
        
            Designed by Canux <br/>
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
