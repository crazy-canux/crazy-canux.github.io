<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSL_System - Morgoth</title>
    <meta name="description" content="">
    
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #fff;
            padding: 1rem 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 2rem;
        }
        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        nav a:hover {
            color: #007acc;
        }
        .site-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007acc;
        }
        main {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .post-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .post-content h1, .post-content h2, .post-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        .post-list h2 {
            margin: 0 0 0.5rem 0;
        }
        .post-list h2 a {
            text-decoration: none;
            color: #333;
        }
        .post-list h2 a:hover {
            color: #007acc;
        }
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #ddd;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="https://canuxcheng.com/" class="site-title">Morgoth</a>
                
                    <a href="/">Home</a>
                
                    <a href="/about/">About</a>
                
                    <a href="/categories/">Categories</a>
                
                    <a href="/tags/">Tags</a>
                
                    <a href="/rtfm/">RTFM</a>
                
                    <a href="/samuel/">Samuel</a>
                
            </nav>
        </div>
    </header>
    
    <div class="container">
        <main>
            
<div class="single-post">
    <article>
        <header>
            <h1>PSL_System</h1>
            <div class="post-meta">
                <time>August 15, 2016</time>
                
                    
                        <span class="category">Python</span>
                    
                
                
                    
                        <span class="tag">#system</span>
                    
                
            </div>
        </header>
        
        <div class="post-content">
            <h1 id="generic-operating-system-services">Generic Operating System Services</h1>
<h2 id="os">os</h2>
<pre><code>import os

os.path # 参考PSL_File
os.name
os.curdir
os.pardir # 表示上一级路径.., 需要用abspath解析
# os.path.abspath(os.path.join(os.path.dirname(os.path.abspath(__file__)), os.pardir))
os.sep
os.extsep
os.altsep
os.pathsep
os.linesep
os.defpath
os.devnull
</code></pre>
<p>classes:</p>
<p>functions:</p>
<pre><code>WCOREDUMP(...)
...

abort(...)
fork() # 创建一个子进程，返回0给子进程，返回子进程pid给父进程．
exec*
wait() # 等待子进程结束，返回(pid, status).
waitpid(pid, options) # 等待指定子进程结束.
listdir(path) # 列出目录下的文件和目录
makedirs(path [, mode=0o777], exist_ok=False)
mkdir(path [, mode=0777])
walk(top, topdown=True, onerror=None, followlinks=False) # 返回 (dirpath, dirnames, filenames) 类型的迭代器
remove(path) # 删除文件
rmdir(path) # 删除目录
removedirs(path)
symlink(src, dst)
chown(path, uid, gid)
chmod(path, mode=0o777)
...

# 使用subprocess模块代替下列函数：
system(command) # 在subshell执行命令，返回退出码(windows系统始终为0),而非命令执行结果．
spawn*
popen*(command [, mode='r' [, bufsize]]) # 执行命令，返回命令执行结果的文件句柄(file对象)
</code></pre>
<p>data:</p>
<pre><code>EX_CANTCREAT = 73
...
</code></pre>
<h2 id="time">time</h2>
<pre><code>import time
</code></pre>
<p>classes:</p>
<p>functions:</p>
<pre><code>clock()
sleep(seconds) # 延迟
tzset()

# 获取时间戳(Epoch seconds)
time() # 获取当前时间戳
mktime(tuple) # mktime((2017,8,23,11,7,10,12)) , 参数是时间元组

# 获取时间元组 (tm_year,tm_mon,tm_mday,tm_hour,tm_min, tm_sec,tm_wday,tm_yday,tm_isdst)
localtime([seconds]) # 参数是时间戳
gmtime([seconds]) # 参数是时间戳
strptime(string, format) # 参数是时间字符串

# 获取时间字符串
asctime([tuple]) # 参数是时间元组
strftime(format[, tuple]) # 参数是时间元组
ctime(seconds) # 参数是时间戳
</code></pre>
<p>data:</p>
<h2 id="logging">logging</h2>
<pre><code>import logging
</code></pre>
<p>classes:</p>
<pre><code>Logger(Filterer)
# methods:
setLevel(self, level) # 只会输出指定level以上的log, 默认是WARNING
critical(self, msg, *args, **kwargs) # 50
error(self, msg, *args, **kwargs) # 40
warning(self, msg, *args, **kwargs) # 30
info(self, msg, *args, **kwargs) # 20
debug(self, msg, *args, **kwargs) # 10
exception(self, msg, *args, **kwargs) #
log(self, level, msg, *args, **kwargs) #
addHandler(self, hdlr) # 添加handler到logger

Formatter
# %(asctime)s:%(levelname)s:%(name)s:%(message)s'
Formatter(fmt=None, datefmt=None)

Handler(Filterer)
# methods:
setFormatter(self, fmt)
setLevel(self, level)

StreamHandler(Handler) # 默认打印到sys.stderr
StreamHandler(stream=None)

FileHandler(StreamHandler) # 打印到文件
FileHandler(filename, mode='a', encoding=None, delay=0)

# from logging.handlers import *
WatchedFileHandler
RotatingFileHandler
</code></pre>
<p>functions:</p>
<pre><code>basicConfig(**kwargs) # 设置log的格式
# filename/filemode/format/datefmt/level/stream
# format默认是BASIC_FORMAT.
# level默认是warning/warn.
# stream默认是sys.stderr,当filename和stream同时指定，stream被忽略．
# datafmt
# filename 日志文件名
# filemode w每次覆盖写入，a每次追加写入

getLogger(name=None) # 返回Logger类型对象
</code></pre>
<p>data:</p>
<pre><code>BASIC_FORMAT = '%(levelname)s:%(name)s:%(message)s'
CRITICAL = 50
FATAL = 50
ERROR = 40
WARN = 30
WARNING = 30
INFO = 20
DEBUG = 10
NOTSET = 0
</code></pre>
<h2 id="getopt">getopt</h2>
<p>C风格的参数处理.</p>
<h2 id="argparse">argparse</h2>
<pre><code>import argparse
</code></pre>
<p>classes:</p>
<pre><code># argparse.ArgumentParser(_AttributeHolder, _ActionsContainer)
parser = argparse.ArgumentParser()
    prog -- The name of the program (default: sys.argv[0])
    usage -- A usage message (default: auto-generated from arguments)
    description -- A description of what the program does
    epilog -- Text following the argument descriptions
    parents -- Parsers whose arguments should be copied into this one
    formatter_class -- HelpFormatter class for printing help messages
    prefix_chars -- Characters that prefix optional arguments
    fromfile_prefix_chars -- Characters that prefix files  containing additional arguments
    argument_default -- The default value for all arguments
    conflict_handler -- String indicating how to handle conflicts
    add_help -- Add a -h/-help option
# methods:
add_argument_group(self, *args, **kwargs) # -&gt; argparse._ArgumentGroup
add_argument(self, *args, **kwargs)
    name or flags - Either a name or a list of option strings, e.g. foo or -f, --foo.
    action - The basic type of action to be taken when this argument is encountered at the command line.
    nargs - The number of command-line arguments that should be consumed.
    const - A constant value required by some action and nargs selections.
    default - The value produced if the argument is absent from the command line.
    type - The type to which the command-line argument should be converted.
    choices - A container of the allowable values for the argument.
    required - Whether or not the command-line option may be omitted (optionals only).
    help - A brief description of what the argument does. # 用来打印默认值：%(default)s
    metavar - A name for the argument in usage messages.
    dest - The name of the attribute to be added to the object returned by.
add_subparsers(self, **kwargs) # -&gt; argparse._SubParsersAction
add_mutually_exclusive_group(self, **kwargs)
set_defaults(self, **kwargs)
parse_args(self, args=None, namespace=None) # -&gt; argparse.Namespace
parse_known_args(self, args=None, namespace=None) # -&gt; argparse.Namespace
convert_arg_line_to_args(self, arg_line)
error(self, message)
exit(self, status=0, message=None)
format_help(self)
format_usage(self)
format_version(self)
print_help(self, file=None)
print_usage(self, file=None)
print_version(self, file=None)
get_default(self, dest)
register(self, registry_name, value, object)

# argparse._ArgumentGroup
# methods:
add_argument(self, *args, **kwargs)
add_argument_group(self, *args, **kwargs)
add_mutually_exclusive_group(self, **kwargs)
get_default(self, dest)
register(self, registry_name, value, object)
set_defaults(self, **kwargs)

# argparse._SubParsersAction
# methods:
add_parser(self, name, **kwargs) # -&gt; argparse.ArgumentParser

# HelpFormatter

# Action
</code></pre>
<p>functions:</p>
<p>data:</p>
<h2 id="io">io</h2>
<h2 id="errno">errno</h2>
<h2 id="getpass">getpass</h2>
<h2 id="curses">curses</h2>
<p><a href="https://github.com/crazy-canux/python/blob/master/python/psl/mycurses.py">https://github.com/crazy-canux/python/blob/master/python/psl/mycurses.py</a></p>
<pre><code>import curses
</code></pre>
<h2 id="platform">platform</h2>
<h2 id="ctypes">ctypes</h2>
<pre><code>import ctypes
</code></pre>
<hr>
<h1 id="unixlinux-sytem">Unix/Linux sytem</h1>
<h2 id="pwd">pwd</h2>
<pre><code>import pwd
</code></pre>
<p>functions:</p>
<pre><code>// 根据用户名获取uid和gid
pw = getpwnam(user)  
pw.pw_uid
pw.pw_gid

getpwuid(uid)
</code></pre>
<h2 id="grp">grp</h2>
<pre><code>import grp
</code></pre>
<p>functions:</p>
<pre><code>group = group.getgrnam(&lt;group_name&gt;)
group.gr_name // 返回组名
group.gr_mem // 返回该组的所有用户
</code></pre>

        </div>
    </article>
</div>

        </main>
    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 Morgoth. Designed by Canux</p>
        </div>
    </footer>
</body>
</html>
