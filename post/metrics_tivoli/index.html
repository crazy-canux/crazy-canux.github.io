<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tivoli - Morgoth</title>
    <meta name="description" content="">
    
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #fff;
            padding: 1rem 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 2rem;
        }
        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        nav a:hover {
            color: #007acc;
        }
        .site-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007acc;
        }
        main {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .post-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .post-content h1, .post-content h2, .post-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        .post-list h2 {
            margin: 0 0 0.5rem 0;
        }
        .post-list h2 a {
            text-decoration: none;
            color: #333;
        }
        .post-list h2 a:hover {
            color: #007acc;
        }
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #ddd;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="https://canuxcheng.com/" class="site-title">Morgoth</a>
                
                    <a href="/">Home</a>
                
                    <a href="/about/">About</a>
                
                    <a href="/categories/">Categories</a>
                
                    <a href="/tags/">Tags</a>
                
                    <a href="/rtfm/">RTFM</a>
                
                    <a href="/samuel/">Samuel</a>
                
            </nav>
        </div>
    </header>
    
    <div class="container">
        <main>
            
<div class="single-post">
    <article>
        <header>
            <h1>Tivoli</h1>
            <div class="post-meta">
                <time>April 20, 2016</time>
                
                    
                        <span class="category">DevOps</span>
                    
                
                
                    
                        <span class="tag">#monitoring</span>
                    
                
            </div>
        </header>
        
        <div class="post-content">
            <h1 id="itm">ITM</h1>
<p>ITM: IBM Tivoli Monitoring</p>
<p>是IBM的Cloud &amp; Smart Infrastructure监控解决方案。</p>
<p>Architecture Overview:</p>
<p><img src="/images/tivoli.png" alt="pic"></p>
<p>ITM主要由管理组件和可选组件组成。</p>
<p>Tivoli Management Services:</p>
<ol>
<li>TEMS</li>
<li>TEPS</li>
<li>TEP client</li>
<li>Historical data collection(warehouse agent)
<ul>
<li>warehouse proxy</li>
<li>summarization and pruning agent</li>
</ul>
</li>
<li>OS agent</li>
</ol>
<p>Optional components:</p>
<ol>
<li>Dashboard Application Services Hub
<ul>
<li>Tivoli Monitoring dashboards(Infrastructure Management Dashboards for Servers)</li>
<li>Tivoli Common Reporting</li>
<li>Tivoli Enterprise Monitoring Automation Server</li>
</ul>
</li>
<li>Tivoli Event Synchronization component</li>
<li>Authorization Policy Components(tivcmd)</li>
</ol>
<p><a href="http://www.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/welcome_63.htm">http://www.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/welcome_63.htm</a></p>
<h2 id="安装itm">安装ITM</h2>
<p>Windows: C:\IBM\ITM</p>
<p>Linux/Unix: /opt/IBM/ITM</p>
<p>分为本地安装和分布式安装。</p>
<ol>
<li>
<p>需要先为TEPS和TDW安装DB(ODBC/JDBC)。</p>
<p>DB2</p>
<p>MSSQL</p>
<p>Oracle</p>
</li>
<li>
<p>在windows/linux/unix安装ITM framework</p>
<p>TEMA</p>
<p>Warehouse Proxy agent</p>
<p>Summarization and Pruning agent</p>
<p>Tivoli performance Analyzer</p>
<p>TEMS</p>
<p>TEPS</p>
<p>TEPD</p>
<p>TEMAS</p>
</li>
<li>
<p>安装agent</p>
<p>安装操作系统的agent：</p>
<p>monitoring agent for your OS。</p>
<p>安装数据库的agent：</p>
<p>TEMA/TEMS/TEPS同时勾选DB的agent。</p>
<p>安装agent builder的agent。</p>
</li>
</ol>
<p><a href="http://www-933.ibm.com/support/fixcentral/swg/downloadFixes?parent=ibm%2FTivoli&amp;product=ibm/Tivoli/IBM+Tivoli+Monitoring&amp;release=All&amp;platform=All&amp;function=fixId&amp;fixids=6.3.0-TIV-ITM-FP0005&amp;includeRequisites=1&amp;includeSupersedes=0&amp;downloadMethod=http">http://www-933.ibm.com/support/fixcentral/swg/downloadFixes?parent=ibm%2FTivoli&amp;product=ibm/Tivoli/IBM+Tivoli+Monitoring&amp;release=All&amp;platform=All&amp;function=fixId&amp;fixids=6.3.0-TIV-ITM-FP0005&amp;includeRequisites=1&amp;includeSupersedes=0&amp;downloadMethod=http</a></p>
<p>&hellip;</p>
<h1 id="tems">TEMS</h1>
<p>TEMS:  Tivoli Enterprise Monitoing Server</p>
<p>TEMS分为remote和hub，remote最后都汇总到hub。</p>
<p>HTEMS: Hub Tivoli Enterprise Monitoring Server</p>
<p>RTEMS: Remote Tivoli Enterprise Monitoring Server</p>
<p>一个TEMS建议管理700个agent</p>
<h1 id="tema">TEMA</h1>
<p>TEMA: Tivoli Enterprise Monitoring Agent</p>
<p>安装agent之后通过GUI工具Tivoli Enterprise Monitoring Service来配置和启动agent。</p>
<p>也可以通过命令行来配置和启动agent。</p>
<p>agent配置需要指定HTEMS服务器。</p>
<h2 id="agentless">Agentless</h2>
<p>TEMS -&gt; Agentless server -&gt; servers</p>
<p>就是用一个中间服务器通过snmp等协议来监控不需要安装agent的被监控服务器。</p>
<p>一个agentless可以设置10个实例(操作系统)，一个实例可以监控100个节点(被监控服务器)。</p>
<p>Agentless OS agents:</p>
<ol>
<li>Agentless Monitoring for AIX OS - SNMP</li>
<li>Agentless Monitoring for HP-UX OS - SNMP</li>
<li>Agentless Monitoring for Linux OS - SNMP</li>
<li>Agentless Monitoring for Solaris OS - SNMP,CIM-XML</li>
<li>Agentless Monitoring for Windows OS - SNMP,WMI</li>
</ol>
<h2 id="agent">Agent</h2>
<p>TEMS -&gt; servers(agent)</p>
<p>一个agent连2个TEMS,一个primary，一个backup。</p>
<p>agent分为：</p>
<ol>
<li>Operating System agent</li>
<li>specialized agent</li>
<li>Application agent</li>
</ol>
<p>OS agent：</p>
<ol>
<li>Windows</li>
<li>Unix</li>
<li>Linux</li>
<li>IBM i5/OS</li>
</ol>
<p>specialized agent：</p>
<ol>
<li>warehouse proxy agent</li>
<li>warehouse summarization and pruning agent</li>
<li>Log file agent</li>
<li>System p® agents (AIX Premium, CEC Base, HMC Base, VIOS Premium)</li>
<li>Systems Director base agent</li>
<li>Tivoli zEnterprise® Agent</li>
<li>Performance Analyzer</li>
</ol>
<h1 id="tepsdb">TEPS+DB</h1>
<p>TEPS: Tivoli Enterprise Portal Server</p>
<p>使用MTEMS来配置TEPS,添加DB。</p>
<h1 id="tepdtep-client">TEPD(TEP client)</h1>
<p>TEP -&gt; TEPS</p>
<p>TEP: Tivoli Enterprise Portal client</p>
<p>TEP是GUI界面，分为：</p>
<ol>
<li>Desktop</li>
<li>Browser</li>
<li>JavaWS: java web start</li>
</ol>
<p>需要安装IBM的java，在C:\Program Files\IBM\Java70。</p>
<p>使用TEP来查看监控结果。</p>
<p>默认用户是sysadmin, 需要为TEPD指定TEPS服务器。</p>
<ol>
<li>
<p>Browser版本</p>
<pre><code> http://&lt;TEPS Server&gt;:15200/cnp.html
</code></pre>
</li>
<li>
<p>Desktop版本</p>
<pre><code> http://&lt;TEPS Server&gt;:15200/tep.jnlp
</code></pre>
<p>安装ITM可以选择安装桌面版,也可以从Java Web Start获取桌面版。</p>
</li>
<li>
<p>Java Web Start版本</p>
<p>结合了desktop和browser的优点,从web下载，在桌面运行。</p>
</li>
</ol>
<p>TEP的结构：</p>
<ul>
<li>
<p>Navigator view</p>
<p>Enterprise</p>
<p>Operating Platform(操作系统类型)</p>
<p>Node(一台服务器一个节点)</p>
<p>Agent(一个节点上的agent)</p>
<p>Situation(一个agent上的situation)</p>
<p>Event(一个situation有多个event)</p>
<p>Attribute group(相同的Situation是一个group)</p>
</li>
<li>
<p>Navigator workspace</p>
<p>每个view项目都有一个默认的workspace。</p>
</li>
</ul>
<p>&hellip;</p>
<h1 id="history-data-collectiontdw">History data collection(TDW)</h1>
<p>TDW: Tivoli Data Warehouse</p>
<p>存储历史数据。支持DB2，Oracle， MSSQL。</p>
<p>也就是将agent收集的数据存到数据库。</p>
<h2 id="warehouse-proxy">Warehouse Proxy</h2>
<p>TDW使用该agent从agents收集和加载数据。</p>
<p>使用MTEMS配置warehouse proxy。</p>
<h2 id="summarization-and-pruning-agent">Summarization and Pruning agent</h2>
<p>TDW使用该agent控制数据库大小。</p>
<p>使用MTEMS配置summarization and pruning agent。</p>
<h1 id="jazz-for-service-managementvisualization">Jazz for Service Management(Visualization)</h1>
<h2 id="dashboard-application-services-hubdashvisualization-services">Dashboard Application Services Hub(DASH)(visualization services)</h2>
<h2 id="ibm-tivoli-common-reportingreporting-services">IBM Tivoli Common Reporting(reporting services)</h2>
<h2 id="registry-services">Registry Services</h2>
<h2 id="security-services">Security Services</h2>
<h2 id="administration-services">Administration Services</h2>
<h2 id="tivoli-directory-integrator">Tivoli Directory Integrator</h2>
<h2 id="ibm-http-server">IBM HTTP Server</h2>
<h2 id="ibm-websphere-application-server">IBM WebSphere® Application Server</h2>
<h2 id="web-server-plug-ins-for-ibm-websphere-application-server">Web Server Plug-ins for IBM WebSphere Application Server</h2>
<p>&hellip;</p>
<h1 id="management">Management</h1>
<p>管理所有组件一般使用GUI叫manage tivoli monitoring services</p>
<p>windows/linux/unix都可以用GUI。</p>
<p>也可以使用CLI（命令行）,见后文.</p>
<p>一般使用GUI来启动、停止和配置组件。</p>
<h1 id="cli">CLI</h1>
<p>Command Line Interface</p>
<h2 id="tacmd">tacmd</h2>
<p>支持windows/linux/unix。</p>
<p>/opt/IBM/ITM/bin/tacmd</p>
<p>C:\IBM\ITM\BIN\tacmd</p>
<p>查看tacmd手册：</p>
<pre><code>./tacmd help
./tacmd ?
</code></pre>
<p>登陆和登出HTEMS:</p>
<pre><code>./tacmd login -s [PROTOCOL://]HOST[:PORT] -u [USERNAME] -p [PASSWORD] -t [TIMEOUT]
./tacmd logout
</code></pre>
<p>登陆和登出TEPS：</p>
<pre><code>./tacmd tepsLogin -s [TEPS_HOSTNAME] -u [USERNAME] -p [TEPS_PASSWORD] -t [TIMEOUT] -i [IGNORE]
./tacmd tepsLogout
</code></pre>
<p>管理agent：</p>
<pre><code>./tacmd startAgent/stopAgent/restartAgent/viewAgent/updateAgent ...
</code></pre>
<p>刷新Netcool/OMNIbus：</p>
<pre><code>./tacmd refreshTECinfo {-t|--type} {eif|maps|attr|all}
</code></pre>
<h2 id="itmcmd">itmcmd</h2>
<p>用于Linux/Unix系统的命令</p>
<p>/opt/IBM/ITM/bin/itmcmd</p>
<p>查看itmcmd手册：</p>
<pre><code>./itmcmd help
./itmcmd ?
</code></pre>
<p>启动或停止TEMS:</p>
<pre><code>./itmcmd server [-options] {start|stop} tems_name
</code></pre>
<p>启动或停止agent：</p>
<pre><code>./itmcmd agent [-options] {start|stop} {pc ...|all}
</code></pre>
<p>启动MTEMS:</p>
<pre><code>./itmcmd manage &amp;
</code></pre>
<h2 id="tivcmd">tivcmd</h2>
<p>&hellip;</p>
<h1 id="advanced-administration">Advanced Administration</h1>
<h2 id="queriesquery-editor">Queries(query editor)</h2>
<p>DB agent -&gt; normal way to get data source from database servers.</p>
<p>ODBC -&gt; get data source from windows database</p>
<p>JDBC -&gt; get data source from linux/unix database</p>
<h2 id="advanced-link-topics">Advanced link topics</h2>
<p>Simple link:</p>
<p>Just used to navigate portal workspaces without using the navigator.</p>
<p>Advanced link:</p>
<p>Can be used to manipulate data that is displayed in the target workspace.</p>
<h2 id="advanced-situation-techniquessituation-editor">Advanced situation techniques(situation editor)</h2>
<h2 id="agent-autonomy">Agent autonomy</h2>
<h2 id="policyworkflow-editor">Policy(workflow editor)</h2>
<h2 id="agentless-monitoring">Agentless monitoring</h2>
<p>TEPS -&gt; Agentless Monitoring Serve -&gt; Servers</p>
<h2 id="agent-managent-servicesams">Agent Managent Services(AMS)</h2>
<hr>
<hr>
<h1 id="agent-builder">Agent Builder</h1>
<p>IBM Agent Builder agents</p>
<p>windows:</p>
<pre><code>C:\Program Files(x86)\IBM\AgentBuilder
</code></pre>
<p>aix/linux:</p>
<pre><code>/opt/ibm/AgentBuilder
</code></pre>
<p>Data source:</p>
<ol>
<li>JDBC</li>
<li>HTTP</li>
<li>SOAP</li>
<li>Ping</li>
<li>Socket</li>
<li>Java API</li>
<li>WMI</li>
<li>Perfmon</li>
<li>CIM</li>
<li>SNMP</li>
<li>JMX</li>
<li>command return code</li>
<li>output from a script</li>
<li>A log file</li>
<li>AIX Binary Log</li>
<li>windows event log</li>
<li>A process</li>
<li>A Windows service</li>
</ol>
<h1 id="create-agent">create agent</h1>
<p>Every agent have a unique produce code.</p>
<p>Like: k00-k99, k{0-9}{A-Z}.</p>
<ol>
<li>
<p>Create the agent in the Agent Builder
agent information
data source
runtime configuration</p>
</li>
<li>
<p>Install and test the agent
output and install the agent
config and start agent in MTEMS.
confirm agent data
revise and retest as needed</p>
</li>
<li>
<p>Add application support
create in TEP, including queries, workspaces, situations, and take actions.
Import application support into agent in Agent Builder.
Retest the agent and application support</p>
</li>
<li>
<p>Create an installation solution.
Create solution install package from the agent.
Create solution install package from the package.
Run the image on the target location.</p>
</li>
</ol>
<h1 id="install-agent">install agent</h1>
<p>Three ways to instal the agent.</p>
<p>You must install the TEMS and TEPS support on TEMS(HTEMS) and TEPS server.</p>
<ol>
<li>
<p>generate the agent files in an ITM installation on this machine</p>
<p>通过GUI快速安装，Agent Builder和ITM（TEMS和TEPS）安装在同一台机器上。</p>
</li>
<li>
<p>generate a solution install package</p>
<p>创建安装镜像来安装，windows的.exe和linux/unix的.bin。</p>
</li>
<li>
<p>create a compressed file so that the agent can be installed on another system</p>
<p>命令行安装。
生成一个.zip和一个.tgz文件。
包括windows的.bat和linux/unix的.sh安装文件</p>
<p>安装下面三个包(等效方法一）：</p>
<pre><code> InstallIra.bat/.sh itm_install_location [[-h Hub_TEMS_hostname] -u HUB_TEMS_username -p Hub_TEMS_password]
 InstallIra.bat C:\IBM\ITM -h &lt;HTEMS&gt; -u &lt;username&gt; -p &lt;password&gt; # for windows
 ./InstallIra.sh /opt/IBM/ITM -h &lt;HTEMS&gt; -u &lt;username&gt; -p &lt;password&gt; # for linux
</code></pre>
<p>在被监控机器安装agent:</p>
<pre><code> installIraAgent.bat/.sh itm_install_location
 installIraAgent.bat C:\IBM\ITM # for windows
 ./installIraAgent.sh /opt/IBM/ITM # for linux
</code></pre>
<p>在TEMS(HTEMS)服务器安装对agent的支持：</p>
<pre><code> installIraAgentTEMS.bat/.sh itm_install_location [[-h Hub_TEMS_hostname] -u HUB_TEMS_username -p Hub_TEMS_password]
 installIraAgentTEMS.bat C:\IBM\ITM # for local HTEMS windows server.
 ./installIraAgentTEMS.sh /opt/IBM/ITM # for local HTEMS linux server.
</code></pre>
<p>在TEPS服务器安装对agent的支持：</p>
<pre><code> installIraAgentTEPS.bat/.sh itm_install_location [[-h TEPS_hostname] -u TEPS_username -p TEPS_password]
 installIraAgentTEPS.bat C:\IBM\ITM # for local TEPS windows server.
 ./installIraAgentTEPS.sh /opt/IBM/ITM # for local TEPS linux server.
</code></pre>
</li>
</ol>
<h1 id="config-agent">config agent</h1>
<p>需要为agent指定HTEMS服务器，并重启agent，然后重启TEPD。</p>
<p>可以通过Tivoli Enterprise Monitoring Service来配置和启动，也可以通过命令行。</p>
<p>查看所有agent信息：</p>
<pre><code>/opt/IBM/ITM/bin/cinfo -i # check the productcode and platformCode.
</code></pre>
<p>config agent:</p>
<pre><code>./itmcmd config -A productcode
</code></pre>
<p>start agent:</p>
<pre><code>./tacmd agent start productcode
</code></pre>
<h1 id="uninstall-agent">uninstall agent</h1>
<ol>
<li>
<p>uninstall from commandline.</p>
<p>windows:</p>
<pre><code> cd ITM_INSTALL/TMAITM6
 cd C:\IBM\ITM\TMAITM6_x64
 kxx_uninstall.vbs ITM_INSTALL
 K&lt;product code&gt;_uninstall.vbs C:\IBM\ITM
</code></pre>
<p>linux/unix:</p>
<pre><code> /opt/IBM/ITM/bin/uninstall.sh [-f] [-i] [-h install_dir] productcode platformCode
</code></pre>
</li>
<li>
<p>Remove from TEP client(clear offline entry)</p>
</li>
</ol>
<h1 id="monitoring-windows-resources">Monitoring windows resources</h1>
<ol>
<li>
<p>Windows Management Instrumentation(WMI)</p>
</li>
<li>
<p>Windows Performance Monitor(Perfmon)</p>
</li>
<li>
<p>Windows Event Log</p>
</li>
</ol>
<h1 id="monitoring-process-and-command-return-codes">Monitoring process and command return codes</h1>
<ol>
<li>
<p>Monitoring process</p>
</li>
<li>
<p>Monitoring command return code</p>
</li>
</ol>
<h1 id="monitoring-custom-data-sources">Monitoring custom data sources</h1>
<ol>
<li>
<p>Monitoring script output</p>
</li>
<li>
<p>Monitoring log file</p>
</li>
</ol>
<h1 id="monitoring-remote-resources">Monitoring remote resources</h1>
<ol>
<li>
<p>Monitoring SNMP</p>
</li>
<li>
<p>Monitoring CIM</p>
</li>
<li>
<p>Moitoring JMX</p>
</li>
</ol>
<hr>
<hr>
<h1 id="netcoolomnibus">Netcool/OMNIbus</h1>
<p>IBM Tivoli Netcool/OMNIbus</p>
<p>TEC: Tivoli Enterprise Console, 已经被Netcool/OMNIbus替代。</p>
<p>windows:</p>
<pre><code>C:\Program Files(x86)\IBM\NCOhome
</code></pre>
<p>linux/aix:</p>
<pre><code>/opt/IBM/NCOhome
</code></pre>
<p>Browser版本需要安装IBM的JRE，在C:\Program Files\IBM\Java70。</p>
<h1 id="eif">EIF</h1>
<p>EIF: Event Integration Facility</p>

        </div>
    </article>
</div>

        </main>
    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 Morgoth. Designed by Canux</p>
        </div>
    </footer>
</body>
</html>
