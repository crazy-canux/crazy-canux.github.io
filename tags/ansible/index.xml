<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ansible on Morgoth</title>
    <link>https://canuxcheng.com/tags/ansible/</link>
    <description>Recent content in Ansible on Morgoth</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 15 Apr 2016 09:41:39 +0800</lastBuildDate>
    <atom:link href="https://canuxcheng.com/tags/ansible/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Ansible</title>
      <link>https://canuxcheng.com/post/devops_ansible/</link>
      <pubDate>Fri, 15 Apr 2016 09:41:39 +0800</pubDate>
      <guid>https://canuxcheng.com/post/devops_ansible/</guid>
      <description>&lt;h1 id=&#34;ansible&#34;&gt;Ansible&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/ansible/ansible&#34;&gt;https://github.com/ansible/ansible&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.ansible.com.cn/index.html&#34;&gt;http://www.ansible.com.cn/index.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;ansible通过SSH来远程管理Linux/Unix机器．&lt;/p&gt;&#xA;&lt;p&gt;ansible通过winrm+powershell来远程管理Windows机器．&lt;/p&gt;&#xA;&lt;p&gt;安装:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ sudo pip install ansible&#xA;$ sudo apt-get install ansible&#xA;$ sudo yum install ansible&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;配置：&lt;/p&gt;&#xA;&lt;p&gt;参考Network-SSH实现从controller到所有node的无密码登陆&lt;/p&gt;&#xA;&lt;p&gt;配置文件执行顺序:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;ANSIBLE_CONFIG&#xA;ansible.cfg&#xA;.ansible.cfg&#xA;/etc/ansible/ansible.cfg&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;手动配置:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ sudo vim /etc/ansible/ansible.cfg&#xA;[defaults]&#xA;ask_pass = False&#xA;host_key_checking = False&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;ansible命令&#34;&gt;ansible命令&lt;/h1&gt;&#xA;&lt;p&gt;ansible运行命令的两种方式：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Ad-hoc相当于直接运行shell命令&lt;/li&gt;&#xA;&lt;li&gt;playbooks相当于运行shell脚本&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;ansible:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ ansible -i inventory group1:group1:group3/all ...&#xA;&#xA;$ansible --help&#xA;-m MODULE_NAME, --module-name=MODULE_NAME # 执行模块，默认是command&#xA;-M MODULE_PATH, --module-path=MODULE_PATH # 指定模块的路径&#xA;-a MODULE_ARGS, --args=MODULE_ARGS # 模块的参数&#xA;-i INVENTORY, --inventory INVENTORY # 默认/etc/ansible/hosts, 需要指定hosts分组&#xA;-f FORKS, --forks=FORKS # 指定并发进程的数量&#xA;-C, --check&#xA;-D, --diff&#xA;-l SUBSET, --limit=SUBSET&#xA;--syntax-check&#xA;--list-hosts&#xA;-v, --verbose # -v, -vvv, -vvvv&#xA;&#xA;# 提权选项&#xA;-b, --become&#xA;--become-method=BECOME_METHOD # sudo(default)/su/pbrun/pfexec/runas/doas&#xA;--become-user=BECOME_USER # root(default)&#xA;-K, --ask-become-pass&#xA;&#xA;# 连接选项&#xA;-u REMOTE_USER&#xA;--ssh-common-args&#xA;--ssh-extra-args&#xA;-T TIMEOUT # default 10s&#xA;-K, --ask-pass&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;inventory&#34;&gt;inventory&lt;/h1&gt;&#xA;&lt;p&gt;inventory包括主机和分组,以及主机变量和分组变量.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
