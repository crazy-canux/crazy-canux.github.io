<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Monitoring on Morgoth</title>
    <link>https://canuxcheng.com/tags/monitoring/</link>
    <description>Recent content in Monitoring on Morgoth</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 05 Apr 2018 21:47:54 +0000</lastBuildDate>
    <atom:link href="https://canuxcheng.com/tags/monitoring/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Monitoring</title>
      <link>https://canuxcheng.com/post/storage_monitoring/</link>
      <pubDate>Thu, 05 Apr 2018 21:47:54 +0000</pubDate>
      <guid>https://canuxcheng.com/post/storage_monitoring/</guid>
      <description>&lt;h1 id=&#34;monitoring&#34;&gt;Monitoring&lt;/h1&gt;&#xA;&lt;h2 id=&#34;diskio&#34;&gt;diskio&lt;/h2&gt;&#xA;&lt;p&gt;IOPS: Input/Output Per Second. 每秒输入输出量，也叫TPS.&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(mean(reads),1s) as &amp;quot;read&amp;quot; FROM &amp;quot;diskio&amp;quot;&#xA;SELECT non_negative_derivative(mean(writes),1s) as &amp;quot;write&amp;quot; FROM &amp;quot;diskio&amp;quot;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;throughput:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(mean(read_bytes),1s) as &amp;quot;read&amp;quot; FROM &amp;quot;diskio&amp;quot;&#xA;SELECT non_negative_derivative(mean(write_bytes),1s) as &amp;quot;write&amp;quot; FROM &amp;quot;diskio&amp;quot;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Utilization:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(last(&amp;quot;io_time&amp;quot;),1ms)&#xA;FROM &amp;quot;diskio&amp;quot;&#xA;WHERE &amp;quot;name&amp;quot; =~ /^(v|s|)d(a|b|c|d)$/&#xA;GROUP BY &amp;quot;host&amp;quot;,&amp;quot;name&amp;quot;,time(_interval)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Queue length:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(last(&amp;quot;weighted_io_time&amp;quot;,1ms))&#xA;FROM &amp;quot;diskio&amp;quot;&#xA;WHERE &amp;quot;name&amp;quot; =~ /^(v|s|)d(a|b|c|d)$/&#xA;GROUP BY &amp;quot;host&amp;quot;,&amp;quot;name&amp;quot;,time(_interval)&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>AlertManager</title>
      <link>https://canuxcheng.com/post/metrics_alertmanager/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_alertmanager/</guid>
      <description>&lt;h1 id=&#34;alert-manager&#34;&gt;alert-manager&lt;/h1&gt;&#xA;&lt;p&gt;在Prometheus中支持基于PromQL创建告警规则, prometheus通过push触发alertmanager.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/alertmanager&#34;&gt;https://github.com/prometheus/alertmanager&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Exporter</title>
      <link>https://canuxcheng.com/post/metrics_exporter/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_exporter/</guid>
      <description>&lt;h1 id=&#34;exporter&#34;&gt;exporter&lt;/h1&gt;&#xA;&lt;p&gt;广义上讲所有可以向Prometheus提供监控样本数据的程序都可以被称为一个Exporter。而Exporter的一个实例称为target，如下所示，Prometheus通过轮询的方式定期从这些target中获取样本数据:&lt;/p&gt;&#xA;&lt;p&gt;prometheus通过pull从exporter拉取数据.&lt;/p&gt;&#xA;&lt;p&gt;直接采集:cAdvisor, kubernetes, etcd, gokit等直接内置了用于向prometheus暴露监控数据的端点.&lt;/p&gt;&#xA;&lt;p&gt;间接采集: 通过promethesu的client api编写exporter，例如mysql-exporter, consul-exporter.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;host&#34;&gt;host&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/node_exporter&#34;&gt;https://github.com/prometheus/node_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;k8s&#34;&gt;k8s&lt;/h1&gt;&#xA;&lt;p&gt;k8s metrics api包括 resource metrics api 和 customer metrics api.&lt;/p&gt;&#xA;&lt;p&gt;cadvisor, metrics-server, kube-state-metrics 等实现了 核心api.&lt;/p&gt;&#xA;&lt;p&gt;一些adapter实现了自定义api.&lt;/p&gt;&#xA;&lt;p&gt;k8s-prometheus-adapter实现了metrics-server的核心api，同时实现了自定义api.&lt;/p&gt;&#xA;&lt;h2 id=&#34;metrics-server&#34;&gt;metrics-server &lt;/h2&gt;&#xA;&lt;p&gt;提供了整个集群的资源监控数据&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes-sigs/metrics-server&#34;&gt;https://github.com/kubernetes-sigs/metrics-server&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;cadvisor&#34;&gt;cAdvisor&lt;/h2&gt;&#xA;&lt;p&gt;负责单节点内部的容器和节点资源使用统计，会自动收集本机容器 CPU、内存、网络和文件系统的资源占用情况&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/google/cadvisor&#34;&gt;https://github.com/google/cadvisor&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;kube-state-metrics&#34;&gt;kube-state-metrics &lt;/h2&gt;&#xA;&lt;p&gt;提供了 Kubernetes 资源对象（如 DaemonSet、Deployments 等）的度量。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/kube-state-metrics&#34;&gt;https://github.com/kubernetes/kube-state-metrics&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;adapter&#34;&gt;adapter&lt;/h2&gt;&#xA;&lt;p&gt;同时支持核心api和自定义api.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/DirectXMan12/k8s-prometheus-adapter&#34;&gt;https://github.com/DirectXMan12/k8s-prometheus-adapter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;blackbox&#34;&gt;blackbox&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/blackbox_exporter&#34;&gt;https://github.com/prometheus/blackbox_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;wmi&#34;&gt;wmi&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/martinlindhe/wmi_exporter&#34;&gt;https://github.com/martinlindhe/wmi_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;snmp&#34;&gt;snmp&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/snmp_exporter&#34;&gt;https://github.com/prometheus/snmp_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;mysql&#34;&gt;mysql&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/mysqld_exporter&#34;&gt;https://github.com/prometheus/mysqld_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;rabbitmq&#34;&gt;rabbitmq&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/deadtrickster/prometheus_rabbitmq_exporter&#34;&gt;https://github.com/deadtrickster/prometheus_rabbitmq_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;mongo&#34;&gt;mongo&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/percona/mongodb_exporter&#34;&gt;https://github.com/percona/mongodb_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;redis&#34;&gt;redis&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/oliver006/redis_exporter&#34;&gt;https://github.com/oliver006/redis_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;haproxy&#34;&gt;haproxy&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/haproxy_exporter&#34;&gt;https://github.com/prometheus/haproxy_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;consul&#34;&gt;consul&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/consul_exporter&#34;&gt;https://github.com/prometheus/consul_exporter&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;pushgateway&#34;&gt;pushgateway&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/prometheus/pushgateway&#34;&gt;https://github.com/prometheus/pushgateway&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Influxdb</title>
      <link>https://canuxcheng.com/post/metrics_influxdb/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_influxdb/</guid>
      <description>&lt;h1 id=&#34;influxdb&#34;&gt;Influxdb&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/influxdata/influxdb&#34;&gt;https://github.com/influxdata/influxdb&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Scalable datastore for metrics, events, and real-time analytics.&lt;/p&gt;&#xA;&lt;p&gt;支持从opentsdb, graphite, collectd等获取数据&lt;/p&gt;&#xA;&lt;p&gt;默认数据库_internal 用于存储内部运行数据&lt;/p&gt;&#xA;&lt;p&gt;安装配置参考官方文档&lt;/p&gt;&#xA;&lt;p&gt;log&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ sudo journalctl -u influxdb.service&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;config:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;# 开通kapacitor的subscription功能&#xA;[[subscriber]]&#xA;enable = true&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;数据结构&#34;&gt;数据结构&lt;/h1&gt;&#xA;&lt;p&gt;influxdb每条记录是一个point.&lt;/p&gt;&#xA;&lt;p&gt;points包括下面部分：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;measurement: a measurement, like cpu_load, 相当于表名&#xA;tags: zero or more tag, key=value, eg: host=ip&#xA;fields: zero or more field, key=value, eg: value=0.18&#xA;time: a timestamp&#xA;&#xA;&amp;lt;measurement&amp;gt;[,&amp;lt;tag-key&amp;gt;=&amp;lt;tag-value&amp;gt;...] &amp;lt;field-key&amp;gt;=&amp;lt;field-value&amp;gt;[,&amp;lt;field2-key&amp;gt;=&amp;lt;field2-value&amp;gt;...] [unix-nano-timestamp]&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;series: 在一个database中,相同的retention policy, measurement, tag set的数据集，叫一个序列．&lt;/p&gt;&#xA;&lt;p&gt;RP: retention policy, autogen是默认的存储策略, 用于设置数据保留时间.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Kapacitor</title>
      <link>https://canuxcheng.com/post/metrics_kapacitor/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_kapacitor/</guid>
      <description>&lt;h1 id=&#34;kapacitor&#34;&gt;Kapacitor&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/influxdata/Kapacitor&#34;&gt;https://github.com/influxdata/Kapacitor&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Open source framework for processing, monitoring, and alerting on time series data&lt;/p&gt;&#xA;&lt;p&gt;可以通过chrongraf创建tickscript/task, 然后通过api/cli导入到kapacitor.&lt;/p&gt;&#xA;&lt;p&gt;配置:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;hostname = &amp;quot;kapcitor-service&amp;quot;&#xA;&#xA;# 如果从influxdb读取数据需要配置该选项．&#xA;[[influxdb]]&#xA;enabled = true&#xA;&#xA;# 如果从该路径加载tickscript&#xA;[[load]]&#xA;enabled = true&#xA;dir=&amp;quot;/etc/kapacitor/load&amp;quot;&#xA;# tasks, 放到/etc/kapacitor/load/tasks/*.tick,重启kapacitor会自动加载task,并默认enable.&#xA;## 要求，ID和tick文件同名，tickscript开头需要指定dbrp, tickscript里面需要指定batch/stream.&#xA;# templates...&#xA;# handlers...&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;cli&#34;&gt;CLI&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ kapacitor help&#xA;&#xA;# 创建template(也就是变量可以单独赋值的tickscript)&#xA;$ kapacitor define-template &amp;lt;name&amp;gt; -tick /path/template.tick&#xA;$ kapacitor show-template &amp;lt;name&amp;gt;&#xA;&#xA;# 创建/更新 task, 创建的默认是disable状态.&#xA;# 从tickscript创建task&#xA;$ kapacitor define &amp;lt;name&amp;gt; -tick task.tick -type [stream|batch] -dbrp [database.retentionPolicy]&#xA;# 从template创建task(如果yaml/json中没有指定template需要用-template指定)&#xA;$ kapacitor define &amp;lt;name&amp;gt; -file task.yaml&#xA;$ kapacitor define &amp;lt;name&amp;gt; -file task.json&#xA;&#xA;# 删除task&#xA;$ kapacitor delete [task id/name]&#xA;&#xA;$ kapacitor list tasks/templates&#xA;$ kapacitor reload [task id/name] # 相当于disable &amp;amp; enable.&#xA;$ kapacitor enable [task id/name]&#xA;$ kapaciror disable [task id/name]&#xA;$ kapacitor show [id/name]&#xA;$ kapacitor watch [task id/name]&#xA;&#xA;$ kapacitor list topics&#xA;$ kapacitor delete topics [topic id]&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;http-api&#34;&gt;Http API&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;port = 9092&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;configuration&#34;&gt;configuration&lt;/h2&gt;&#xA;&lt;p&gt;获取所有可以overwrite的参数&lt;/p&gt;</description>
    </item>
    <item>
      <title>Prometheus</title>
      <link>https://canuxcheng.com/post/metrics_prometheus/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_prometheus/</guid>
      <description>&lt;h1 id=&#34;prometheus&#34;&gt;Prometheus&lt;/h1&gt;&#xA;&lt;p&gt;Prometheus Server是Prometheus组件中的核心部分，负责实现对监控数据的获取，存储以及查询&lt;/p&gt;&#xA;&lt;p&gt;swarm部署:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/vegasbrianc/prometheus&#34;&gt;https://github.com/vegasbrianc/prometheus&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;k8s部署:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/coreos/kube-prometheus&#34;&gt;https://github.com/coreos/kube-prometheus&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/coreos/prometheus-operator&#34;&gt;https://github.com/coreos/prometheus-operator&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/helm/charts/tree/master/stable/prometheus-operator&#34;&gt;https://github.com/helm/charts/tree/master/stable/prometheus-operator&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;高可用:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/thanos-io/thanos&#34;&gt;https://github.com/thanos-io/thanos&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;prometheus grafana dashboard:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes-monitoring/kubernetes-mixin&#34;&gt;https://github.com/kubernetes-monitoring/kubernetes-mixin&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/grafana/kubernetes-app&#34;&gt;https://github.com/grafana/kubernetes-app&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;promql&#34;&gt;PromQL&lt;/h1&gt;&#xA;&lt;p&gt;metrics类型:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;counter计数器&lt;/li&gt;&#xA;&lt;li&gt;gauge仪表盘&lt;/li&gt;&#xA;&lt;li&gt;histogram直方图&lt;/li&gt;&#xA;&lt;li&gt;summary摘要&lt;/li&gt;&#xA;&lt;/ol&gt;</description>
    </item>
    <item>
      <title>Telegraf</title>
      <link>https://canuxcheng.com/post/metrics_telegraf/</link>
      <pubDate>Thu, 18 Jan 2018 19:23:25 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_telegraf/</guid>
      <description>&lt;h1 id=&#34;telegraf&#34;&gt;Telegraf&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/influxdata/telegraf&#34;&gt;https://github.com/influxdata/telegraf&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;The plugin-driven server agent for collecting &amp;amp; reporting metrics.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;configuartion&#34;&gt;Configuartion&lt;/h1&gt;&#xA;&lt;p&gt;agent configuration:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;interval    所有inputs的默认运行间隔&#xA;round_interval&#xA;collection_jitter&#xA;precision    ns/us/ms/s&#xA;flush_interval&#xA;flush_jitter&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;input configuration:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;interval&#xA;name_override # 默认measurements是插件名,修改默认measurements.&#xA;name_prefix&#xA;name_suffix&#xA;tags&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;go-api&#34;&gt;Go API&lt;/h1&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://godoc.org/github.com/influxdata/telegraf#Input&#34;&gt;https://godoc.org/github.com/influxdata/telegraf#Input&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;测试插件：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;# 需要配置文件&#xA;$ telegraf --input-filter &amp;lt;plugin-name&amp;gt; --test&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;build&#34;&gt;Build&lt;/h1&gt;&#xA;&lt;p&gt;安装依赖：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;sudo apt-get install ruby-dev&#xA;sudo gem install fpm&#xA;sudo apt-get install rpm&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;编译telegraf:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;make telegraf&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;生成配置文件：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;./telegraf config &amp;gt; ./etc/telegraf.conf&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;构建deb:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Grafana</title>
      <link>https://canuxcheng.com/post/metrics_grafana/</link>
      <pubDate>Thu, 12 Jan 2017 21:05:48 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_grafana/</guid>
      <description>&lt;h1 id=&#34;grafana&#34;&gt;Grafana&lt;/h1&gt;&#xA;&lt;p&gt;The tool for beautiful monitoring and metric analytics &amp;amp; dashboards for Graphite, InfluxDB &amp;amp; Prometheus &amp;amp; More.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/grafana/grafana&#34;&gt;https://github.com/grafana/grafana&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;支持多种data source:&lt;/p&gt;&#xA;&lt;p&gt;graphite/influxdb/opentsdb/premetheus/elasticsearch/mysql/postgresql&lt;/p&gt;&#xA;&lt;p&gt;安装配置参考官方文档&lt;/p&gt;&#xA;&lt;p&gt;grafana配置文件是grafana.ini.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;http-api&#34;&gt;HTTP API&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;port = 3000&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;dashboard&#34;&gt;dashboard&lt;/h2&gt;&#xA;&lt;p&gt;create/update dashboard:&lt;/p&gt;&#xA;&lt;p&gt;将datasource设置成变量，然后导出的json文件就可以直接导入了．&lt;/p&gt;&#xA;&lt;p&gt;dashboard.id=null才能创建新dashboard.&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;post /api/dashboards/db&#xA;data = json.dumps({&#xA;    &amp;quot;dashboard&amp;quot;: {&#xA;        &amp;quot;id&amp;quot;: null,&#xA;        ...&#xA;    },&#xA;    &amp;quot;folderId&amp;quot;: 0,&#xA;    &amp;quot;overwrite&amp;quot;: True, # True for python, true for go.&#xA;    &amp;quot;message&amp;quot;: &amp;quot;commit message&amp;quot;&#xA;})&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;datasource&#34;&gt;datasource&lt;/h2&gt;&#xA;&lt;p&gt;create datasource:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;post /api/datasources&#xA;data = json.dumps({&#xA;    &amp;quot;name&amp;quot;:&#xA;    &amp;quot;type&amp;quot;:&#xA;    &amp;quot;url&amp;quot;:&#xA;    &amp;quot;database&amp;quot;:&#xA;    &amp;quot;access&amp;quot;: &amp;quot;proxy&amp;quot;&#xA;})&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;alert&#34;&gt;alert&lt;/h2&gt;&#xA;&lt;p&gt;create alert notification/channel:&lt;/p&gt;</description>
    </item>
    <item>
      <title>Metrics</title>
      <link>https://canuxcheng.com/post/metrics/</link>
      <pubDate>Wed, 08 Jun 2016 09:46:47 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics/</guid>
      <description>&lt;h1 id=&#34;monitoring&#34;&gt;Monitoring&lt;/h1&gt;&#xA;&lt;p&gt;Tranditional monitoring is for Datacenter, like nagios, zabbix.&lt;/p&gt;&#xA;&lt;p&gt;Modern monitoring is for Cloud and Container.&lt;/p&gt;&#xA;&lt;p&gt;Modern monitoring based on metrics, logs and tracing.&lt;/p&gt;&#xA;&lt;h1 id=&#34;tick-stack&#34;&gt;TICK stack&lt;/h1&gt;&#xA;&lt;p&gt;influxdb: tsdb.&lt;/p&gt;&#xA;&lt;p&gt;kapacitor: alerting.&lt;/p&gt;&#xA;&lt;p&gt;chronograf: GUI.&lt;/p&gt;&#xA;&lt;p&gt;telegraf(agent): metrics collector.&lt;/p&gt;&#xA;&lt;h1 id=&#34;prometheus&#34;&gt;Prometheus&lt;/h1&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;graphing&#34;&gt;Graphing&lt;/h1&gt;&#xA;&lt;p&gt;最流行的监控绘图软件是grafana, 支持influxdb,elasticsearch和prometheus.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Monitoring</title>
      <link>https://canuxcheng.com/post/monitoring/</link>
      <pubDate>Wed, 08 Jun 2016 09:46:47 +0000</pubDate>
      <guid>https://canuxcheng.com/post/monitoring/</guid>
      <description>&lt;h1 id=&#34;monitoring&#34;&gt;Monitoring&lt;/h1&gt;&#xA;&lt;p&gt;Tranditional monitoring is for Datacenter, like nagios, zabbix.&lt;/p&gt;&#xA;&lt;p&gt;Modern monitoring is for Cloud and Container.&lt;/p&gt;&#xA;&lt;p&gt;Modern monitoring based on metrics, logs and tracing.&lt;/p&gt;&#xA;&lt;p&gt;现代的监控系统在DevOps的基础上，除了传统的metrics和logging的采集，还需要tracing应用。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;metrics&#34;&gt;metrics&lt;/h1&gt;&#xA;&lt;h2 id=&#34;tick-stack&#34;&gt;TICK stack&lt;/h2&gt;&#xA;&lt;p&gt;influxdb: tsdb.&lt;/p&gt;&#xA;&lt;p&gt;kapacitor: alerting.&lt;/p&gt;&#xA;&lt;p&gt;chronograf: GUI.&lt;/p&gt;&#xA;&lt;p&gt;telegraf(agent): metrics collector.&lt;/p&gt;&#xA;&lt;h2 id=&#34;prometheus&#34;&gt;Prometheus&lt;/h2&gt;&#xA;&lt;h2 id=&#34;graphing&#34;&gt;Graphing&lt;/h2&gt;&#xA;&lt;p&gt;最流行的监控绘图软件是grafana, 支持influxdb,elasticsearch和prometheus.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;logging&#34;&gt;Logging&lt;/h1&gt;&#xA;&lt;h2 id=&#34;elk&#34;&gt;ELK&lt;/h2&gt;&#xA;&lt;h2 id=&#34;lokigrafana&#34;&gt;Loki+Grafana&lt;/h2&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;tracing&#34;&gt;Tracing&lt;/h1&gt;&#xA;&lt;h2 id=&#34;jeager&#34;&gt;Jeager&lt;/h2&gt;</description>
    </item>
    <item>
      <title>Tivoli</title>
      <link>https://canuxcheng.com/post/metrics_tivoli/</link>
      <pubDate>Wed, 20 Apr 2016 13:57:31 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_tivoli/</guid>
      <description>&lt;h1 id=&#34;itm&#34;&gt;ITM&lt;/h1&gt;&#xA;&lt;p&gt;ITM: IBM Tivoli Monitoring&lt;/p&gt;&#xA;&lt;p&gt;是IBM的Cloud &amp;amp; Smart Infrastructure监控解决方案。&lt;/p&gt;&#xA;&lt;p&gt;Architecture Overview:&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://canuxcheng.com/images/tivoli.png&#34; alt=&#34;pic&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;ITM主要由管理组件和可选组件组成。&lt;/p&gt;&#xA;&lt;p&gt;Tivoli Management Services:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;TEMS&lt;/li&gt;&#xA;&lt;li&gt;TEPS&lt;/li&gt;&#xA;&lt;li&gt;TEP client&lt;/li&gt;&#xA;&lt;li&gt;Historical data collection(warehouse agent)&#xA;&lt;ul&gt;&#xA;&lt;li&gt;warehouse proxy&lt;/li&gt;&#xA;&lt;li&gt;summarization and pruning agent&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;OS agent&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;Optional components:&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;Dashboard Application Services Hub&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Tivoli Monitoring dashboards(Infrastructure Management Dashboards for Servers)&lt;/li&gt;&#xA;&lt;li&gt;Tivoli Common Reporting&lt;/li&gt;&#xA;&lt;li&gt;Tivoli Enterprise Monitoring Automation Server&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Tivoli Event Synchronization component&lt;/li&gt;&#xA;&lt;li&gt;Authorization Policy Components(tivcmd)&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://www.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/welcome_63.htm&#34;&gt;http://www.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/welcome_63.htm&lt;/a&gt;&lt;/p&gt;&#xA;&lt;h2 id=&#34;安装itm&#34;&gt;安装ITM&lt;/h2&gt;&#xA;&lt;p&gt;Windows: C:\IBM\ITM&lt;/p&gt;&#xA;&lt;p&gt;Linux/Unix: /opt/IBM/ITM&lt;/p&gt;&#xA;&lt;p&gt;分为本地安装和分布式安装。&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;需要先为TEPS和TDW安装DB(ODBC/JDBC)。&lt;/p&gt;&#xA;&lt;p&gt;DB2&lt;/p&gt;&#xA;&lt;p&gt;MSSQL&lt;/p&gt;</description>
    </item>
    <item>
      <title>Monitoring</title>
      <link>https://canuxcheng.com/post/network_monitoring/</link>
      <pubDate>Sun, 03 Apr 2016 14:46:19 +0000</pubDate>
      <guid>https://canuxcheng.com/post/network_monitoring/</guid>
      <description>&lt;h1 id=&#34;monitoring&#34;&gt;Monitoring&lt;/h1&gt;&#xA;&lt;p&gt;network usage:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;bytes_sent(out)&#xA;bytes_recv(in)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;packets:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;packets_sent(out)&#xA;packets_recv(in)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;error_in/out:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(mean(&amp;quot;err_in&amp;quot;), 1s) AS &amp;quot;recv&amp;quot;, non_negative_derivative(mean(&amp;quot;err_out&amp;quot;), 1s) AS &amp;quot;send&amp;quot;&#xA;FROM &amp;quot;net&amp;quot;&#xA;WHERE &amp;quot;interface&amp;quot; =~ /^(vlan|eth|ens|bond).*/ AND $timeFilter&#xA;GROUP BY time($__interval), &amp;quot;host&amp;quot;, &amp;quot;interface&amp;quot; fill(none)&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;drop_in/out:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;SELECT non_negative_derivative(mean(&amp;quot;drop_in&amp;quot;), 1s) AS &amp;quot;recv&amp;quot;, non_negative_derivative(mean(&amp;quot;drop_out&amp;quot;), 1s) AS &amp;quot;send&amp;quot;&#xA;FROM &amp;quot;net&amp;quot;&#xA;WHERE &amp;quot;interface&amp;quot; =~ /^(vlan|eth|ens|bond).*/ AND $timeFilter&#xA;GROUP BY time($__interval), &amp;quot;host&amp;quot;, &amp;quot;interface&amp;quot; fill(none)&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>Monitoring</title>
      <link>https://canuxcheng.com/post/win_monitoring/</link>
      <pubDate>Sun, 03 Apr 2016 14:15:40 +0000</pubDate>
      <guid>https://canuxcheng.com/post/win_monitoring/</guid>
      <description>&lt;h1 id=&#34;windows的services和process&#34;&gt;windows的services和process&lt;/h1&gt;&#xA;&lt;p&gt;services是windows的服务，有Name(Display Name)，Service Name，Description等属性。&lt;/p&gt;&#xA;&lt;p&gt;process是以.exe为后缀的application，有Name(product name)、original filename(Image Name)、file description(description)等属性。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Monitoring</title>
      <link>https://canuxcheng.com/post/linux_monitoring/</link>
      <pubDate>Thu, 31 Mar 2016 21:48:59 +0000</pubDate>
      <guid>https://canuxcheng.com/post/linux_monitoring/</guid>
      <description>&lt;h1 id=&#34;inode&#34;&gt;inode&lt;/h1&gt;</description>
    </item>
    <item>
      <title>Nagios</title>
      <link>https://canuxcheng.com/post/metrics_nagios/</link>
      <pubDate>Fri, 25 Mar 2016 11:15:48 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_nagios/</guid>
      <description>&lt;h1 id=&#34;nagios&#34;&gt;Nagios&lt;/h1&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;Nagios is the industry standard in IT infrastructure monitoring&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;Nagios offers complete monitoring and alerting for servers, switches, applications, and services.&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;p&gt;Nagios官方宣称nagios是IT基础监控的工业标准。&lt;/p&gt;&#xA;&lt;p&gt;Nagios提供对服务器，交换机，应用和服务的完整的监控和警报。&lt;/p&gt;&#xA;&lt;p&gt;Nagios是无agent的，nagios的plugin通过协议远程获取信息。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.nagios.org/&#34;&gt;https://www.nagios.org/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://www.nagios.com/&#34;&gt;https://www.nagios.com/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://exchange.nagios.org/&#34;&gt;https://exchange.nagios.org/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/NagiosEnterprises&#34;&gt;https://github.com/NagiosEnterprises&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/nagios-plugins&#34;&gt;https://github.com/nagios-plugins&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;nagios安装配置&#34;&gt;Nagios安装配置&lt;/h1&gt;&#xA;&lt;h2 id=&#34;nagios发展&#34;&gt;Nagios发展&lt;/h2&gt;&#xA;&lt;p&gt;Nagios core 1.0&lt;/p&gt;&#xA;&lt;p&gt;Nagios core 2.0&lt;/p&gt;&#xA;&lt;p&gt;Nagios core 3.0&lt;/p&gt;&#xA;&lt;p&gt;Nagios XI&lt;/p&gt;&#xA;&lt;p&gt;Nagios core 4.0&lt;/p&gt;&#xA;&lt;p&gt;目前nagios有两大阵营：&lt;/p&gt;&#xA;&lt;p&gt;开源解决方案： Nagios core&lt;/p&gt;&#xA;&lt;p&gt;商业解决方案： Nagios XI&lt;/p&gt;&#xA;&lt;h2 id=&#34;nagios安装配置-1&#34;&gt;Nagios安装配置&lt;/h2&gt;&#xA;&lt;p&gt;安装和配置nagios core,plugins,addons参考&lt;/p&gt;&#xA;&lt;p&gt;官方文档:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/4/en/toc.html&#34;&gt;https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/4/en/toc.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;中文文档：&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://nagios-cn.sourceforge.net/nagios-cn/index.html&#34;&gt;http://nagios-cn.sourceforge.net/nagios-cn/index.html&lt;/a&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;nagios开源解决方案&#34;&gt;Nagios开源解决方案&lt;/h1&gt;&#xA;&lt;h2 id=&#34;nagios-core&#34;&gt;Nagios core:&lt;/h2&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;Nagios Core is the monitoring and alerting engine that serves as the primary application around which hundreds of Nagios projects are built.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Zabbix</title>
      <link>https://canuxcheng.com/post/metrics_zabbix/</link>
      <pubDate>Fri, 25 Mar 2016 11:15:48 +0000</pubDate>
      <guid>https://canuxcheng.com/post/metrics_zabbix/</guid>
      <description>&lt;h1 id=&#34;zabbix&#34;&gt;Zabbix&lt;/h1&gt;</description>
    </item>
  </channel>
</rss>
