<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Deploy on Morgoth</title>
    <link>https://canuxcheng.com/tags/deploy/</link>
    <description>Recent content in Deploy on Morgoth</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 27 Sep 2016 10:23:22 +0000</lastBuildDate>
    <atom:link href="https://canuxcheng.com/tags/deploy/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Deploy</title>
      <link>https://canuxcheng.com/post/django_deploy/</link>
      <pubDate>Tue, 27 Sep 2016 10:23:22 +0000</pubDate>
      <guid>https://canuxcheng.com/post/django_deploy/</guid>
      <description>&lt;h1 id=&#34;发布django项目&#34;&gt;发布django项目&lt;/h1&gt;&#xA;&lt;p&gt;django内置一个轻量级web开发服务器。&lt;/p&gt;&#xA;&lt;p&gt;如果要发布django项目需要另外的操作。&lt;/p&gt;&#xA;&lt;p&gt;也可以发布到其它的云平台。&lt;/p&gt;&#xA;&lt;p&gt;一般通过wsgi或者asgi来部署.&lt;/p&gt;&#xA;&lt;h2 id=&#34;deploy时django的设置&#34;&gt;deploy时django的设置&lt;/h2&gt;&#xA;&lt;p&gt;settings.py中的设置：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;ALLOWED_HOSTS = [&#39;*&#39;]&#xA;DEBUG = False&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h1 id=&#34;wsgi-部署&#34;&gt;WSGI 部署&lt;/h1&gt;&#xA;&lt;h2 id=&#34;apache2--mod_wsgi&#34;&gt;apache2 + mod_wsgi&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://github.com/GrahamDumpleton/mod_wsgi&#34;&gt;https://github.com/GrahamDumpleton/mod_wsgi&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;mod_wsgi是C写的apache的模块，实现了兼容WSGI接口，用来部署python的web应用。&lt;/p&gt;&#xA;&lt;p&gt;作为apache2的模块安装&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;# ubuntu/debian&#xA;sudo aptitude install apache2 # 安装apache2&#xA;sudo aptitude install libapache2-mod-wsgi # for python2&#xA;sudo aptitude install libapache2-mod-wsgi-py3 # for python3&#xA;&#xA;# redhat/centos/fedora&#xA;sudo yum install httpd2&#xA;sudo yum install httpd-devel&#xA;sudo yum install mod_wsgi&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;Ubuntu创建网站的配置文件/etc/apache2/sites-available/mysite.conf:&lt;/p&gt;&#xA;&lt;p&gt;Fedora创建网站的配置文件/etc/httpd/conf.d/mysite.conf:&lt;/p&gt;&#xA;&lt;p&gt;一般部署到web服务器，/home/user/修改为/var/www/&lt;project-name&gt;/&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;# Include the project dir, can not inside VirtualHost section.&#xA;WSGIPythonPath /home/user/mysite&#xA;# If use virtualenv and named .venv&#xA;# WSGIPythonPath /home/user/mysite:/home/user/mysite/.venv/lib/python2.7/site-packages&#xA;&#xA;&amp;lt;VirtualHost *:80&amp;gt;&#xA;    ServerName localhost&#xA;    # ServerName yoursite.domain&#xA;    ServerAdmin canuxcheng@gmail.com&#xA;&#xA;    Alias /robots.txt /home/user/mysite/static/robots.txt&#xA;    Alias /favicon.ico /home/user/mysite/static/favicon.ico&#xA;&#xA;    Alias /media/ /home/user/mysite/media/&#xA;    Alias /static/ /home/user/mysite/static/&#xA;&#xA;    &amp;lt;Directory /home/user/mysite/media&amp;gt;&#xA;    Required all granted&#xA;    &amp;lt;/Directory&amp;gt;&#xA;&#xA;    &amp;lt;Directory /home/user/mysite/static&amp;gt;&#xA;    Required all granted&#xA;    &amp;lt;/Directory&amp;gt;&#xA;&#xA;    # If use daemon mode to run WSGI process.&#xA;    WSGIDaemonProcess mysite python-path=/home/user/mysite&#xA;    # If use virtualenv and named .venv&#xA;    # WSGIDaemonProcess mysite python-path=/home/user/mysite:/home/user/mysite/.venv/lib/python2.7/site-packages&#xA;    # WSGIProcessGroup mysite&#xA;&#xA;    WSGIScriptAlias / /home/user/mysite/mysite/wsgi.py&#xA;&#xA;    &amp;lt;Directory /home/user/mysite/mysite&amp;gt;&#xA;    &amp;lt;Files wsgi.py&amp;gt;&#xA;    Required all granted&#xA;    &amp;lt;/Files&amp;gt;&#xA;    &amp;lt;/Directory&amp;gt;&#xA;&#xA;    # check the log in /var/log/apache2/error_mysite.log or access_mysite.log&#xA;    ErrorLog ${APACHE_LOG_DIR}/error_mysite.log&#xA;    CustomLog ${APACHE_LOG_DIR}/access_mysite.log combined&#xA;&amp;lt;/VirtualHost&amp;gt;&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;修改项目的wsgi.py:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
