<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Libvirt on Morgoth</title>
    <link>https://canuxcheng.com/tags/libvirt/</link>
    <description>Recent content in Libvirt on Morgoth</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 05 Apr 2017 21:47:54 +0000</lastBuildDate>
    <atom:link href="https://canuxcheng.com/tags/libvirt/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Libvirt</title>
      <link>https://canuxcheng.com/post/libvirt/</link>
      <pubDate>Wed, 05 Apr 2017 21:47:54 +0000</pubDate>
      <guid>https://canuxcheng.com/post/libvirt/</guid>
      <description>&lt;h1 id=&#34;libvirt&#34;&gt;Libvirt&lt;/h1&gt;&#xA;&lt;p&gt;支持多种虚拟化平台的库&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://libvirt.org/&#34;&gt;https://libvirt.org/&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;安装:&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ sudo apt-get install libvirt-bin (包含virsh命令和libvirtd daemon)&#xA;// libvirtd在container中无法运行；在container中安装libvirt-bin可以获取virsh命令远程访问libvirt-bin server.&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p&gt;libvirt-bin拆分成了两个包：&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;libvirt-daemon-system&#xA;libvirt-clients&#xA;&#xA;$ sudo apt-get install libvirt-dev # 库, python/go client依赖该库&#xA;&#xA;$ sudo apt-get install virt-manager # windows管理工具&#xA;&#xA;$ sudo apt-get install virt-view # ...&#xA;&#xA;$ sudo service libvirt-bin restart&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;virsh&#34;&gt;virsh&lt;/h1&gt;&#xA;&lt;p&gt;libvirt的命令行工具&lt;/p&gt;&#xA;&lt;pre&gt;&lt;code&gt;$ virsh list --all    # 查看所有虚拟机&#xA;$ virsh list --all --name # 只看domain name.&#xA;&#xA;$ virsh define /path/to/X.xml    # 从xml配置文件定义一个domain&#xA;$ virsh start     # 启动虚拟机&#xA;$ virsh reboot    # 重启虚拟机&#xA;$ virsh shutdown   # 关闭虚拟机&#xA;$ virsh destroy    # 强制关闭虚拟机&#xA;$ virsh undefine   # 移除虚拟机&#xA;$ virsh vncdisplay # 查看虚拟机的vnc信息，可以通过vnc访问.&#xA;&#xA;$ virsh net-list --all # 查看所有网络&#xA;$ virsh net-define default.xml&#xA;$ virsh net-autostart default&#xA;$ virsh net-start default&#xA;$ virsh net-undefine default&#xA;$ virsh net-destroy default&#xA;&#xA;# 批量操作vm&#xA;$ for vm in `virsh list --all --name`; do virsh undefine/destroy ${vm}; done&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;qemu-img&#34;&gt;qemu-img&lt;/h1&gt;&#xA;&lt;p&gt;创建虚拟机的镜像文件:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
