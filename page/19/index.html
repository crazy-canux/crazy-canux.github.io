<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="generator" content="Hugo 0.147.9">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morgoth - Morgoth</title>
    <meta name="description" content="">
    
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #fff;
            padding: 1rem 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 2rem;
        }
        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        nav a:hover {
            color: #007acc;
        }
        .site-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007acc;
        }
        main {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .post-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .post-content h1, .post-content h2, .post-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        .post-list h2 {
            margin: 0 0 0.5rem 0;
        }
        .post-list h2 a {
            text-decoration: none;
            color: #333;
        }
        .post-list h2 a:hover {
            color: #007acc;
        }
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #ddd;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="https://canuxcheng.com/" class="site-title">Morgoth</a>
                
                    <a href="/">Home</a>
                
                    <a href="/about/">About</a>
                
                    <a href="/categories/">Categories</a>
                
                    <a href="/tags/">Tags</a>
                
                    <a href="/rtfm/">RTFM</a>
                
                    <a href="/samuel/">Samuel</a>
                
            </nav>
        </div>
    </header>
    
    <div class="container">
        <main>
            
<div class="home">
    <h1>Morgoth</h1>
    <p></p>
    
    <section class="recent-posts">
        <h2>Recent Posts</h2>
        <ul class="post-list">
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/storage_monitoring/">Monitoring</a></h2>
                    <div class="post-meta">
                        <time>April 5, 2018</time>
                        
                            
                                <span class="category">Storage</span>
                            
                        
                    </div>
                    
                        <p><h1 id="monitoring">Monitoring</h1>
<h2 id="diskio">diskio</h2>
<p>IOPS: Input/Output Per Second. 每秒输入输出量，也叫TPS.</p>
<pre><code>SELECT non_negative_derivative(mean(reads),1s) as &quot;read&quot; FROM &quot;diskio&quot;
SELECT non_negative_derivative(mean(writes),1s) as &quot;write&quot; FROM &quot;diskio&quot;
</code></pre>
<p>throughput:</p>
<pre><code>SELECT non_negative_derivative(mean(read_bytes),1s) as &quot;read&quot; FROM &quot;diskio&quot;
SELECT non_negative_derivative(mean(write_bytes),1s) as &quot;write&quot; FROM &quot;diskio&quot;
</code></pre>
<p>Utilization:</p>
<pre><code>SELECT non_negative_derivative(last(&quot;io_time&quot;),1ms)
FROM &quot;diskio&quot;
WHERE &quot;name&quot; =~ /^(v|s|)d(a|b|c|d)$/
GROUP BY &quot;host&quot;,&quot;name&quot;,time(_interval)
</code></pre>
<p>Queue length:</p>
<pre><code>SELECT non_negative_derivative(last(&quot;weighted_io_time&quot;,1ms))
FROM &quot;diskio&quot;
WHERE &quot;name&quot; =~ /^(v|s|)d(a|b|c|d)$/
GROUP BY &quot;host&quot;,&quot;name&quot;,time(_interval)
</code></pre></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/websocket/">Websocket</a></h2>
                    <div class="post-meta">
                        <time>April 3, 2018</time>
                        
                            
                                <span class="category">Network</span>
                            
                        
                    </div>
                    
                        <p><h1 id="websocket">WebSocket</h1>
<p>websocket用于server和browser之间通讯．</p>
<p>websocket采用特殊报头，使得浏览器和服务器只需要做一个握手的动作．</p>
<p>通讯数据以\x00开头，以\xFF结尾．</p>
<p>url:</p>
<pre><code>ws://
wss://
</code></pre>
<p>一个客户端只建立一个tcp连接</p>
<p>服务端可以推送/push数据到web客户端</p>
<p>有更加亲量级的头，减少数据传送．</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/js_bom/">JS BOM</a></h2>
                    <div class="post-meta">
                        <time>March 15, 2018</time>
                        
                            
                                <span class="category">Web</span>
                            
                        
                    </div>
                    
                        <p><h1 id="bom">BOM</h1>
<p>Browser Object Model</p>
<p>介绍浏览器对象，不过缺乏规范.</p>
<h1 id="window">window</h1>
<p>window对象是最顶层对象，有6大属性,属性本身也是对象.</p>
<p>window对象的document属性也是对象，document对象有5大属性.</p>
<p>引用当前窗口时，可以省略window对象.</p>
<p>eg:</p>
<pre><code>window.document
document

window.alert()
alert()
</code></pre>
<p>对象集合:</p>
<pre><code>frames[]
</code></pre>
<p>attribution:</p>
<pre><code>document # DOM的Document对象
history # History对象
location # Location对象
Navigator # Navigator对象
Screen # Screen对象
window # 等价于self

closed
defaultStatus
status
innerheight
innerwidth
outerheight
outerwidth
</code></pre>
<p>method:</p>
<pre><code>alert() // 弹出警告框
confirm() // 和alert差不多，带确定和取消按钮，确定返回true
prompt() // 输入提示框,返回输入内容
find() // 查找

// 子窗口的opener属性反过来引用打开她的那个窗口(父窗口)
subwin = open() // 打开一个新窗口, _parent在当前窗口打开, 返回子窗口的window对象.
subwin.opener // 表示window

moveTo()
moveBy()
resizeTo()
resizeBy()

setTimeout()
clearTimeout()

setInterval()
clearInterval()

close()
</code></pre>
<h1 id="location">location</h1>
<p>attribution:</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/travel_brazil/">Brazil</a></h2>
                    <div class="post-meta">
                        <time>March 8, 2018</time>
                        
                            
                                <span class="category">Misc</span>
                            
                        
                    </div>
                    
                        <p><h1 id="巴西之旅">巴西之旅</h1>
<p>看照片：</p>
<h1 id="库里提巴">库里提巴</h1>
<p>库里提巴（Curitiba）</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/metrics_telegraf/">Telegraf</a></h2>
                    <div class="post-meta">
                        <time>January 18, 2018</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                        
                    </div>
                    
                        <p><h1 id="telegraf">Telegraf</h1>
<p><a href="https://github.com/influxdata/telegraf">https://github.com/influxdata/telegraf</a></p>
<p>The plugin-driven server agent for collecting &amp; reporting metrics.</p>
<hr>
<h1 id="configuartion">Configuartion</h1>
<p>agent configuration:</p>
<pre><code>interval    所有inputs的默认运行间隔
round_interval
collection_jitter
precision    ns/us/ms/s
flush_interval
flush_jitter
</code></pre>
<p>input configuration:</p>
<pre><code>interval
name_override # 默认measurements是插件名,修改默认measurements.
name_prefix
name_suffix
tags
</code></pre>
<hr>
<h1 id="go-api">Go API</h1>
<p><a href="https://godoc.org/github.com/influxdata/telegraf#Input">https://godoc.org/github.com/influxdata/telegraf#Input</a></p>
<p>测试插件：</p>
<pre><code># 需要配置文件
$ telegraf --input-filter &lt;plugin-name&gt; --test
</code></pre>
<hr>
<h1 id="build">Build</h1>
<p>安装依赖：</p>
<pre><code>sudo apt-get install ruby-dev
sudo gem install fpm
sudo apt-get install rpm
</code></pre>
<p>编译telegraf:</p>
<pre><code>make telegraf
</code></pre>
<p>生成配置文件：</p>
<pre><code>./telegraf config &gt; ./etc/telegraf.conf
</code></pre>
<p>构建deb:</p></p>
                    
                </li>
            
        </ul>
    </section>
    
    
        <a href="/page/18/">← Previous</a>
    
    
        <a href="/page/20/">Next →</a>
    
</div>

        </main>
    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 Morgoth. Designed by Canux</p>
        </div>
    </footer>
</body>
</html>
