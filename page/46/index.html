<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="generator" content="Hugo 0.147.9">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morgoth - Morgoth</title>
    <meta name="description" content="">
    
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: #fff;
            padding: 1rem 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 2rem;
        }
        nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }
        nav a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }
        nav a:hover {
            color: #007acc;
        }
        .site-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007acc;
        }
        main {
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .post-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }
        .post-content h1, .post-content h2, .post-content h3 {
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .post-list {
            list-style: none;
            padding: 0;
        }
        .post-list li {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        .post-list h2 {
            margin: 0 0 0.5rem 0;
        }
        .post-list h2 a {
            text-decoration: none;
            color: #333;
        }
        .post-list h2 a:hover {
            color: #007acc;
        }
        footer {
            text-align: center;
            padding: 2rem 0;
            color: #666;
            border-top: 1px solid #ddd;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <a href="https://canuxcheng.com/" class="site-title">Morgoth</a>
                
                    <a href="/">Home</a>
                
                    <a href="/about/">About</a>
                
                    <a href="/categories/">Categories</a>
                
                    <a href="/tags/">Tags</a>
                
                    <a href="/rtfm/">RTFM</a>
                
                    <a href="/samuel/">Samuel</a>
                
            </nav>
        </div>
    </header>
    
    <div class="container">
        <main>
            
<div class="home">
    <h1>Morgoth</h1>
    <p></p>
    
    <section class="recent-posts">
        <h2>Recent Posts</h2>
        <ul class="post-list">
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/devops_jenkins/">Jenkins</a></h2>
                    <div class="post-meta">
                        <time>April 15, 2016</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                        
                    </div>
                    
                        <p><h1 id="jenkins">Jenkins</h1>
<p>Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks such as building, testing, and deploying software.</p>
<p><a href="https://github.com/jenkinsci/jenkins">https://github.com/jenkinsci/jenkins</a></p>
<p>安装好Jenkins后安装需要的插件．</p>
<p>安装jenkins:</p>
<pre><code># download jenkins.war and install java8.
$ java -jar jenkins.war --httpPort=8080
$ firefox http://localhost:8080
</code></pre>
<p>设置开机自动启动，不用每次从终端启动:</p>
<pre><code>$ vim /etc/systemd/system/jenkins.service
$ systemctl daemon-reload
$ systemctl enable jenkins.service
$ systemctl start jenkins
</code></pre>
<p>jinkens主目录:</p>
<pre><code># 默认主目录在/home/canux/.jenkins
</code></pre>
<hr>
<h1 id="nodes">nodes</h1>
<p>添加节点需要安装和master版本一样的java.</p>
<p>on jenkins agent:</p>
<ol>
<li>install java.</li>
<li>create folder and grant permission. (/home/jenkins)</li>
</ol>
<p>on jenkins:</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/devops_gitlab/">Gitlab</a></h2>
                    <div class="post-meta">
                        <time>April 15, 2016</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                        
                    </div>
                    
                        <p><h1 id="gitlab">Gitlab</h1>
<p>gitlab是开源的有web界面的git服务器．</p>
<p><a href="https://about.gitlab.com/">https://about.gitlab.com/</a></p>
<p>安装gitlab:</p>
<pre><code>sudo apt-get install -y curl openssh-server ca-certificates
sudo apt-get install -y postfix
curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
sudo EXTERNAL_URL=&quot;http://gitlab.example.com&quot; apt-get install gitlab-ce
</code></pre>
<p>配置:</p>
<pre><code>/etc/gitlab/gitlab.rb
</code></pre>
<p>升级gitlab:</p>
<p>需要先升级到下个major版本的最后一个稳定版.</p>
<pre><code>current:   9.4.7
patch: gitlab-ce=9.5.10
patch: gitlab-ce_10.8.7
patch: gitlab-ce=11.11.8
patch: gitlab-ce=12.0.12
target: 12.10.14
</code></pre>
<p>runner:</p>
<pre><code>#sudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
sudo chmod +x /usr/local/bin/gitlab-runner
sudo gitlab-runner install --user=canux --working-directory=/home/canux/gitlab
sudo gitlab-runner register
sudo gitlab-runner start
</code></pre>
<hr>
<h1 id="cli">CLI</h1>
<p>备份：</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/devops/">DevOps</a></h2>
                    <div class="post-meta">
                        <time>April 15, 2016</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                        
                    </div>
                    
                        <p><h1 id="devops">DevOps</h1>
<p>DevOps包括ChatOps, 敏捷开发，持续集成,持续交付,持续发布/部署，QA(自动化测试），智能监控和日志管理等内容．</p>
<p>DevOps涉及到三个部门：</p>
<ul>
<li>Development</li>
<li>Operations</li>
<li>Quality Assurance</li>
</ul>
<hr>
<h1 id="ci">CI</h1>
<p>Continuous Integration.</p>
<p>持续集成包括：</p>
<ul>
<li>编译代码.</li>
<li>静态代码分析.</li>
<li>自动化测试，例如selenium.</li>
<li>代码覆盖率分析.</li>
<li>构建，例如docker.</li>
</ul>
<h1 id="cd">CD</h1>
<p>Continuous Delivery.</p>
<p>持续交付包括：</p>
<ul>
<li>将通过测试的代码部署到Staging.</li>
</ul>
<h1 id="continuous-releasedeploy">Continuous Release/Deploy</h1>
<p>持续部署/发布包括：</p>
<ul>
<li>将通过评审的交付代码部署到Production.</li>
</ul>
<hr>
<h1 id="cicd的工具">CI/CD的工具</h1>
<p>持续集成和部署</p>
<h2 id="jenkins">Jenkins</h2>
<h2 id="travis-ci">travis CI</h2>
<p><a href="https://travis-ci.org/">https://travis-ci.org/</a></p>
<p>travis CI是基于github的CI工具, 部署代码然后运行测试代码.</p>
<p>在github项目添加.travis.yml文件：</p>
<pre><code>language: python
python:
  - &quot;2.7&quot;
install:
  - pip install -r requirements.txt
  - pip install coveralls
script:
  - coverage run --source=pymonitoringplugins setup.py test
after_success:
  - coveralls
</code></pre>
<h2 id="circleci">circleci</h2>
<p><a href="https://circleci.com/">https://circleci.com/</a></p>
<hr>
<h1 id="coverage的工具">coverage的工具</h1>
<p>统计单元测试的覆盖率</p>
<h2 id="coveralls">coveralls</h2>
<p><a href="https://coveralls.io/">https://coveralls.io/</a></p>
<h2 id="codecov">codecov</h2>
<p><a href="https://codecov.io/">https://codecov.io/</a></p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/devops_dev/">Development</a></h2>
                    <div class="post-meta">
                        <time>April 15, 2016</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                        
                    </div>
                    
                        <p><h1 id="development">Development</h1>
<p>开发相关的工具</p>
<p>传统的软件开发采用的是瀑布式开发流程．</p>
<p>现代的软件开发采用的是敏捷开发流程(Agile development).</p>
<p>Alpha: inner test version.</p>
<p>Beta: outer test version.</p>
<p>RC: release candidate. 最终版本之前的最后一个版本．也叫gamma.</p>
<p>RTM: release to manufacture, 最终版</p>
<p>GA: generally avaliable. stable/production.</p>
<hr>
<h1 id="怎样选择licenses">怎样选择Licenses</h1>
<p><a href="http://choosealicense.com/licenses/">http://choosealicense.com/licenses/</a></p>
<p><a href="https://choosealicense.com/">https://choosealicense.com/</a></p>
<p><img src="/images/license.jpeg" alt="pic"></p>
<hr>
<h1 id="semver">semver</h1>
<p>语义化版本．</p>
<p><a href="http://semver.org/lang/zh-CN/">http://semver.org/lang/zh-CN/</a></p>
<p><a href="https://github.com/mojombo/semver">https://github.com/mojombo/semver</a></p>
<pre><code>主版本号.次版本号.修订号
Major.Minor.Patch

Major: 做了不兼容的API修改
Minor: 做了向下兼容的功能性新增
Patch: 做了向下兼容的问题修正
</code></pre>
<hr>
<h1 id="文档阅读工具">文档阅读工具</h1>
<h2 id="zeal">zeal</h2>
<h2 id="dash">dash</h2>
<hr>
<h1 id="cookiecutter">cookiecutter</h1>
<p>一个快速建立工程模板的命令行工具．</p>
<p><a href="https://github.com/audreyr/cookiecutter">https://github.com/audreyr/cookiecutter</a></p>
<p><a href="https://github.com/audreyr/cookiecutter-pypackage">https://github.com/audreyr/cookiecutter-pypackage</a></p>
<pre><code>$sudo -E pip install cookiecutter
# 创建python项目
$cookiecutter https://github.com/audreyr/cookiecutter-pypackage.git
# 创建django格式的python项目
$cookiecutter https://github.com/pydanny/cookiecutter-django
# 创建openstack格式的python项目
$cookiecutter https://git.openstack.org/openstack-dev/cookiecutter.git
$cookiecutter https://github.com/openstack-dev/cookiecutter.git
</code></pre>
<hr>
<h1 id="bumpversion">bumpversion</h1>
<p>版本管理工具</p></p>
                    
                </li>
            
                <li>
                    <h2><a href="https://canuxcheng.com/post/devops_vault/">Vault</a></h2>
                    <div class="post-meta">
                        <time>April 15, 2016</time>
                        
                            
                                <span class="category">DevOps</span>
                            
                                <span class="category">Security</span>
                            
                        
                    </div>
                    
                        <p><h1 id="vault">Vault</h1>
<p><a href="https://github.com/hashicorp/vault">https://github.com/hashicorp/vault</a></p>
<p>Install:</p>
<p><a href="https://learn.hashicorp.com/tutorials/vault/getting-started-install">https://learn.hashicorp.com/tutorials/vault/getting-started-install</a></p>
<h1 id="cli">CLI</h1>
<p>可以通过环境变量或者命令行参数指定server:</p>
<pre><code>-address VAULT_ADDR
-namespace VAULT_NAMESPACE
vault [subcommand] -address=&quot;https://server:8200&quot;
</code></pre>
<p>server:</p>
<pre><code>// 启动vault
$ vault server -config=/etc/vault/config.hcl
</code></pre>
<p>agent:</p>
<pre><code>$ vault agent
</code></pre>
<p>login:</p>
<pre><code>// 跟据token登陆.
$ vault login

$vault login -token-only -method=oidc
</code></pre>
<p>operator:</p>
<pre><code>// init生成keys和token.
$ vault operator init

// 通过keys  unseal
$ vault operator unseal

// 通过token seal
$ vault operator seal
</code></pre>
<p>auth:</p>
<pre><code>// 查看auth
$ vault auth list
</code></pre>
<p>secrets</p>
<pre><code>// 查看secrets engine
$ vault secrets list

// enable kv
$ vault secrets enable -path=&lt;ns&gt;/&lt;name&gt; kv
$ vault secrets enable kv

// disable kv
$ vault secrets disable kv

// 创建一个database engine
vault secrets enable -path &lt;ns&gt;/mysql database
// 创建rabbitmq engine
vault secrets enable -path &lt;ns&gt;/rabbitmq rabbitmq
</code></pre>
<p>policy</p></p>
                    
                </li>
            
        </ul>
    </section>
    
    
        <a href="/page/45/">← Previous</a>
    
    
        <a href="/page/47/">Next →</a>
    
</div>

        </main>
    </div>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 Morgoth. Designed by Canux</p>
        </div>
    </footer>
</body>
</html>
